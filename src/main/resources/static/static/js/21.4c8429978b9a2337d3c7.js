webpackJsonp([21],{"/TMn":function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a("y/jF"),n=a("T452"),i=a("dybo"),o=a("8EyE"),r=a("Y8t/"),l={name:"personalManger",data:function(){return{current:1,editId:"",id:"",personInfo:"",relayManger:!1,newClassVal:"",innerPerson:!1,minilist:[],pagesize:20,total:0,currentPage:1,noData:!1,nickName:"",rootId:"",classManger:!1,options:[],opt:[{label:"æ‰€æœ‰",value:"æ‰€æœ‰"},{label:"å°ç¦",value:"å°ç¦"},{label:"æ­£å¸¸",value:"æ­£å¸¸"}],listOne:[{title:"å¤´åƒ"},{title:"æ˜µç§°"},{title:"åˆ›å»ºæ—¶é—´"},{title:"å¥½å‹äººæ•°"},{title:"é”€å”®ç»„"},{title:"å¾…é€šè¿‡å¥½å‹äººæ•°"},{title:"è®¾å¤‡çŠ¶æ€"},{title:"ä¸ªäººå·ç±»åˆ«"},{title:"æ“ä½œ"}],listDia:[],width:"width01",personClass:"",personRboot:"",newPerson:!1,avatar:"",userNickName:"",userRootId:"",listNum:[]}},inject:["reload"],created:function(){var e=this;this.noData=!0;Object(r.c)("/personalManager/1/20/",{}).then(function(s){s.code===n.a?e.$message({type:"error",message:"ä¸ªäººå·åˆ—è¡¨è¯·æ±‚"+s.message}):(e.noData=!1,e.minilist=s.data.records,e.total=s.data.total)}).catch(function(s){e.$message({type:"error",message:s.message})}),Object(r.b)("/personalCategoryManager").then(function(s){console.log(s),e.options=s.data}).catch(function(s){e.$message({type:"error",message:s.message})}),Object(r.b)("/personalManager/Num").then(function(s){s.code===n.a?e.$message({type:"error",message:s.message}):e.listNum=s.data}).catch(function(s){e.$message({type:"error",message:s.message})})},methods:{go:function(e){var s=this;console.log(e);Object(r.c)("/personalManager/"+e+"/20/",{}).then(function(e){console.log(e),s.minilist=e.data.records}).catch(function(e){s.$message({type:"error",message:e.message})})},pagechange:function(e){var s=this;console.log(e);Object(r.c)("/personalManager/"+e+"/20/",{}).then(function(e){console.log(e),s.minilist=e.data.records}).catch(function(e){s.$message({type:"error",message:e.message})})},goFileName:function(e){this.$router.push({path:"/firendFansNum",query:{wxId:e.wxId,nickName:e.nickName,personalNoCategoryName:e.category,friendsNum:e.friendsNum,equipmentStatus:e.status,equipmentId:e.equipmentId}})},relayEidt:function(e){var s=this;console.log(e),Object(r.b)("/personalCategoryManager").then(function(e){console.log(e),s.options=e.data}).catch(function(e){s.$message({type:"error",message:e.message})}),this.relayManger=!this.relayManger,this.avatar=e.avatar,this.userNickName=e.nickName,this.userRootId=e.clickId,this.id=e.id,this.personInfo=e.category},relaySurePerson:function(){var e=this,s={headPortraitUrl:this.avatar,nickname:this.userNickName,equipmentId:this.userRootId,category:this.personInfo};""==this.personInfo?this.$message({type:"error",message:"è¯·é€‰æ‹©ç±»åˆ«åœ¨ä¿å­˜å“¦ï¼Œç±»åˆ«æ˜¯ä¸èƒ½ä¸ºç©ºçš„"}):Object(r.d)("/personalManager/updatePersonal/"+this.id+"/",s).then(function(s){console.log(s),s.code===n.a?e.$message({type:"error",message:"ä¿®æ”¹"+s.message}):(e.$message({type:"success",message:"ä¿®æ”¹"+s.message}),e.relayManger=!e.relayManger,e.reload())}).catch(function(s){e.$message({type:"error",message:s.message})})},PersonChangeInfo:function(e){console.log(e),this.personInfo=e},relayCancelPerson:function(){this.relayManger=!this.relayManger},rootChange:function(e){console.log(e),this.personRboot=e},personClassChange:function(e){this.personClass=e},personSea:function(){var e=this,s={nickname:this.nickName,equipmentId:this.rootId,equipmentStatus:this.personRboot,personalNoCategoryName:this.personClass};Object(r.c)("/personalManager/1/20/",s).then(function(s){console.log(s),s.code===n.a?e.$message({type:"error",message:"å•Šå¶ï¼Œæ²¡æœ‰æŸ¥åˆ°æ•°æ®ğŸ‘‰"}):(console.log(s),e.minilist=s.data.records,e.total=s.data.total)}).catch(function(s){e.$message({type:"error",message:s.message})})},personclassManger:function(){var e=this;this.classManger=!this.classManger,Object(r.b)("/personalCategoryManager").then(function(s){e.listDia=s.data}).catch(function(){e.$message({type:"error",message:"æœåŠ¡å™¨å‡ºé—®é¢˜äº†!"})})},mangerNewAdd:function(){this.innerPerson=!this.innerPerson,this.changeVal=0,this.newClassVal=""},surePerson:function(){this.classManger=!this.classManger,this.reload()},cancelPerson:function(){this.classManger=!this.classManger},newSurePerson:function(){var e=this;if(""==this.newClassVal)this.$message({type:"error",message:"è¯·å¡«å†™ä¸ªäººå·ç±»åˆ«åç§°"});else{var s={};s=1===this.changeVal?{superId:Object(o.b)("p_superId"),personalNoCategory:this.newClassVal,id:this.editId}:{superId:Object(o.b)("p_superId"),personalNoCategory:this.newClassVal,id:""},Object(r.c)("/personalCategoryManager/addCategory",s).then(function(s){s.code===n.a?e.$message({type:"error",message:s.message}):(e.innerPerson=!e.innerPerson,e.$message({type:"success",message:s.message}),Object(r.b)("/personalCategoryManager").then(function(s){e.listDia=s.data}).catch(function(){e.$message({type:"error",message:"æœåŠ¡å™¨å‡ºé—®é¢˜äº†!"})}))}).catch(function(s){e.$message({type:"error",message:s.message})})}},newCancelPerson:function(){this.innerPerson=!this.innerPerson,this.newClassVal=""},editperManger:function(e){this.changeVal=1,this.innerPerson=!this.innerPerson,this.editId=e.id,this.newClassVal=e.personalNoCategory},deleteManger:function(e){var s=this;Object(r.a)("/personalCategoryManager/"+e.id+"/").then(function(e){e.code===n.a?s.$message({type:"error",message:"åˆ é™¤ç±»åˆ«"+e.message}):(s.$message({type:"success",message:"åˆ é™¤ç±»åˆ«"+e.message}),Object(r.b)("/personalCategoryManager").then(function(e){s.listDia=e.data}).catch(function(){s.$message({type:"error",message:"æœåŠ¡å™¨å‡ºé—®é¢˜äº†!"})}))}).catch(function(e){s.$message({type:"error",message:e.message})})}},components:{Loading:t.a,"v-pagination":i.a}},c={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"personalManger"},[a("div",{staticClass:"personSearch",staticStyle:{"padding-bottom":"20px"}},[a("div",{staticClass:"person_nickName"},[a("label",[e._v("ä¸ªäººå·æ˜µç§°:")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"è¾“å…¥ä¸ªäººå·æ˜µç§°æŸ¥è¯¢"},model:{value:e.nickName,callback:function(s){e.nickName=s},expression:"nickName"}})],1),e._v(" "),a("div",{staticClass:"person-class",staticStyle:{"margin-left":"20px"}},[a("label",{staticStyle:{"margin-right":"20px"}},[e._v("è®¾å¤‡çŠ¶æ€:")]),e._v(" "),a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©"},on:{change:e.rootChange},model:{value:e.personRboot,callback:function(s){e.personRboot=s},expression:"personRboot"}},e._l(e.opt,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"personSS"},[a("span",{on:{click:e.personSea}},[e._v("æœç´¢")])])]),e._v(" "),a("div",{staticClass:"personSearch"}),e._v(" "),a("div",{staticClass:"personInfo"},[a("div",{staticClass:"perinfo"},[e._v("ä¸ªäººå·ä¿¡æ¯")]),e._v(" "),a("ul",{staticClass:"personUl"},[a("li",[e._v("ä¸ªäººå·æ€»æ•°ï¼š"+e._s(e.listNum.total)+" ä¸ª")]),e._v(" "),a("li",[e._v("åˆè®¡å¥½å‹æ€»æ•°ï¼š"+e._s(e.listNum.friendsNum)+" äºº")]),e._v(" "),a("li",[e._v("æ‰¿æ‹…æ´»åŠ¨æ€»æ•°ï¼š"+e._s(e.listNum.activityNum)+" ä¸ª")])])]),e._v(" "),a("div",{staticClass:"personData"},[a("span",{on:{click:e.personclassManger}},[e._v("ç±»åˆ«ç®¡ç†")])]),e._v(" "),a("div",{staticClass:"groupCategory"},[a("ul",{staticClass:"groupMingDan"},e._l(e.listOne,function(s,t){return a("li",{key:t,class:e.width},[e._v(e._s(s.title))])}),0)]),e._v(" "),e.minilist.length>0?a("div",[a("ul",{staticClass:"groupMin-wrapper"},e._l(e.minilist.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),function(s,t){return a("li",{key:t,staticClass:"groupMinLi-wrapper"},[a("ul",{staticClass:"groupMinDanCon"},[a("li",{staticClass:"groupFileName"},[a("img",{staticStyle:{width:"30px",height:"30px",margin:"0 auto","vertical-align":"middle"},attrs:{src:s.avatar,alt:""}})]),e._v(" "),a("li",{staticClass:"hoverPerson",attrs:{title:s.nickName},on:{click:function(a){return e.goFileName(s)}}},[a("span",[e._v(e._s(s.nickName))]),e._v(" "),a("img",{staticClass:"img1",attrs:{src:s.qrCode}})]),e._v(" "),a("li",{attrs:{title:s.projectInstanceRegTime}},[e._v(e._s(s.projectInstanceRegTime))]),e._v(" "),a("li",[e._v(e._s(s.friendsNum))]),e._v(" "),s.group?a("li",[e._v(e._s(s.group))]):a("li",[e._v("æ— ")]),e._v(" "),a("li",[e._v(e._s(s.waitingNums))]),e._v(" "),a("li",[e._v(e._s(s.status))]),e._v(" "),s.category?a("li",[e._v(e._s(s.category))]):a("li",[e._v("æ— ")]),e._v(" "),a("li",{staticClass:"miniHover"},[a("span",{staticClass:"miniSpa1",on:{click:function(a){return e.relayEidt(s)}}},[a("i",{staticClass:"iconfont icon-xiugai",staticStyle:{"vertical-align":"middle"}}),e._v("ç¼–è¾‘\n                ")])])])])}),0),e._v(" "),a("v-pagination",{attrs:{total:e.total,"current-page":e.current,num:e.total},on:{pagechange:e.pagechange,go:e.go}})],1):a("div",{staticClass:"noData"},[e._v("æš‚æ— æ•°æ®")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.noData,expression:"noData"}]},[a("loading")],1),e._v(" "),a("el-dialog",{attrs:{title:"æ›´æ”¹ä¸ªäººå·ä¿¡æ¯",width:"30%",center:"",visible:e.relayManger},on:{"update:visible":function(s){e.relayManger=s}}},[a("div",{staticClass:"changeCon"},[a("div",{staticClass:"changeHead"},[a("img",{attrs:{src:e.avatar}}),e._v(" "),a("div",{staticClass:"changeWord"},[a("span",[e._v(e._s(e.userNickName))]),e._v(" "),a("span",[e._v(e._s(e.userRootId))])])]),e._v(" "),a("el-form",{staticStyle:{"padding-top":"20px"}},[a("el-form-item",{attrs:{label:"ç±» åˆ«ï¼š","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©"},on:{change:e.PersonChangeInfo},model:{value:e.personInfo,callback:function(s){e.personInfo=s},expression:"personInfo"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.personalNoCategory,value:e.personalNoCategory}})}),1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:e.relaySurePerson}},[e._v("ç¡® å®š")]),e._v(" "),a("el-button",{on:{click:e.relayCancelPerson}},[e._v("å– æ¶ˆ")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"ç±»åˆ«ç®¡ç†",center:"",visible:e.classManger},on:{"update:visible":function(s){e.classManger=s}}},[a("div",{staticClass:"classPersonAdd"},[a("span",{staticClass:"clNewAdd",on:{click:e.mangerNewAdd}},[e._v("æ–°å¢")]),e._v(" "),a("ul",{staticClass:"cl-ul"},[a("li",[e._v("ä¸ªäººå·ç±»åˆ«")]),e._v(" "),a("li",[e._v("æ“ä½œ")])]),e._v(" "),a("ul",{staticClass:"groupMin-wrapper"},e._l(e.listDia,function(s,t){return a("li",{key:t,staticClass:"groupMinLi-wrapper"},[a("ul",{staticClass:"groupMinDanCon listPer"},[a("li",{staticClass:"groupFileName"},[e._v("\n                  "+e._s(s.personalNoCategory)+"\n                ")]),e._v(" "),a("li",{staticClass:"miniHover"},[a("span",{staticClass:"miniSpa1",on:{click:function(a){return e.editperManger(s)}}},[a("i",{staticClass:"iconfont icon-xiugai",staticStyle:{"vertical-align":"middle"}}),e._v("ç¼–è¾‘\n                  ")]),e._v(" "),a("span",{staticClass:"miniSpa1",on:{click:function(a){return e.deleteManger(s)}}},[a("i",{staticClass:"iconfont icon-xiugai",staticStyle:{"vertical-align":"middle"}}),e._v("åˆ é™¤\n                  ")])])])])}),0)]),e._v(" "),a("el-dialog",{attrs:{title:"æ–°å¢ä¸ªäººå·ç±»åˆ«",center:"",visible:e.innerPerson,"append-to-body":""},on:{"update:visible":function(s){e.innerPerson=s}}},[a("div",{staticClass:"xinzeng"},[a("label",{staticStyle:{width:"200px","line-height":"40px"}},[e._v("åç§°ï¼š")]),e._v(" "),a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç±»åˆ«åç§°ï¼Œ10å­—ä»¥å†…",maxlength:"10"},model:{value:e.newClassVal,callback:function(s){e.newClassVal=s},expression:"newClassVal"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:e.newSurePerson}},[e._v("ç¡® å®š")]),e._v(" "),a("el-button",{on:{click:e.newCancelPerson}},[e._v("å– æ¶ˆ")])],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:e.surePerson}},[e._v("ç¡® å®š")]),e._v(" "),a("el-button",{on:{click:e.cancelPerson}},[e._v("å– æ¶ˆ")])],1)],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(l,c,!1,function(e){a("eVAA"),a("krtf")},"data-v-19965a01",null);s.default=g.exports},eVAA:function(e,s){},krtf:function(e,s){}});