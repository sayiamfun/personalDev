webpackJsonp([32],{R3Xb:function(t,e){},bXzj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("y/jF"),i=a("4KuQ"),n=a("T452"),o=a("dybo"),l=a("SthE"),c=a("Y8t/"),r=a("8EyE"),d={name:"personalTask",data:function(){return{roadId:"",showHidden:!1,channelName:"",taskId:"",innerVisible:!1,current:1,type:"",stree:"",diaImg:"https://goss.veer.com/creative/vcg/veer/1600water/veer-158141693.jpg",copyLink:"",dialogFormVisible1:!1,dialogFormVisible:!1,seeData:!1,value:[{value:0,label:"进行中"}],personRboot:"",writeLink:"",link:!1,opt:[{value:"",label:"全部"},{value:0,label:"进行中"},{value:1,label:"已结束"}],taskVal:"",pagesize:20,total:0,currentPage:1,Fans:[],noLoading:!1,totalData:[],taskList:[],taskChannelId:""}},inject:["reload"],created:function(){var t=this;Object(c.c)("/personal/noTask/1/20/",{activityType:0,taskName:""}).then(function(e){console.log(e),e.code===n.a?t.$message({type:"error",message:"数据请求"+e.message}):(t.Fans=e.data.records,t.total=e.data.total)}).catch(function(e){t.$message({type:"error",message:e.message})})},methods:{qudao:function(t){console.log(t),this.taskChannelId=t.id,this.channelName=t.channelName,this.personRboot=t.channelName},channelCancel:function(){this.innerVisible=!this.innerVisible,this.personRboot=""},channelSubmit:function(){var t=this,e=Object(r.b)("p_openid");Object(c.b)("/wxShortUrl?openid="+e+"&roadId="+this.taskId+"&id="+this.taskChannelId+"&flag=2").then(function(e){t.shortUrl=e.data.url,t.copyLink=e.data.url;var a=Object(l.a)({data:decodeURIComponent(t.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(a),t.innerVisible=!t.innerVisible}).catch(function(e){t.$message({type:"error",message:e.message})})},selectChannel:function(){this.innerVisible=!this.innerVisible},go:function(t){var e=this;console.log(t);Object(c.c)("/personal/noTask/"+t+"/20/",{}).then(function(t){console.log(t),e.Fans=t.data.records}).catch(function(t){e.$message({type:"error",message:t.message})})},pagechange:function(t){var e=this;console.log(t);Object(c.c)("/personal/noTask/"+t+"/20/",{}).then(function(t){console.log(t),e.Fans=t.data.records}).catch(function(t){e.$message({type:"error",message:t.message})})},endTask:function(t){var e=this;Object(c.a)("/personal/noTask/stopTask/"+t.id+"/").then(function(t){console.log(t),t.code===n.a?e.$message({type:"error",message:t.message}):(e.$message({type:"success",message:t.message}),e.reload())}).catch(function(t){e.$message({type:"error",message:t.message})})},editTask:function(t){this.$router.push({path:"/personalTaskDetails",query:{id:t.id,error:1,roadId:t.roadId}})},personTaskSearch:function(){var t=this;this.Fans=[];var e={activityType:"",taskName:this.taskVal};Object(c.c)("/personal/noTask/1/20/",e).then(function(e){e.code===n.a?t.$message({type:"error",message:"查询"+e.message}):(t.Fans=e.data.records,t.total=e.data.total)}).catch(function(e){t.$message({type:"error",message:e.message})})},refreshImg:function(){var t=this;Object(c.b)("/apiPages/buildPassage/rebuildShortLink?id="+this.refreshId).then(function(e){console.log(e),e.code===n.a&&(t.diaImg=e.data.qrcode,t.copyLink=e.data.link)}).catch(function(e){t.$message({type:"error",message:e.message})})},copyConLick:function(t,e){console.log(t),Object(i.a)(t,e)},selectOnes:function(t){console.log(t)},selectTwos:function(t){console.log(t)},selectOne:function(t){var e=this;console.log(t);var a={activityType:t,taskName:""};Object(c.c)("/personal/noTask/1/20/",a).then(function(t){console.log(t),e.Fans=t.data.records,e.total=t.data.total}).catch(function(t){e.$message({type:"error",message:t.message})})},pulPerTask:function(){this.$router.push({path:"/personalTaskDetails",query:{error:0}})},handleSizeChange:function(t){console.log(t),this.pagesize=t},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t},jmupLink:function(){this.link=!this.link},seeperData:function(t){var e=this;Object(c.b)("/personal/noTask/getPersonalDataByTaskId/"+t.id+"/").then(function(t){console.log(t),t.code===n.a?e.$message({type:"error",message:t.message}):0===t.code&&(t.data.No?e.$message({type:"error",message:t.data.No}):(e.seeData=!e.seeData,e.totalData=t.data.taskData,e.taskList=t.data.personalList))}).catch(function(t){e.$message({type:"error",message:t.message})})},personalTaskDetails:function(t){this.$router.push({path:"/personalTaskDetails",query:{id:t.id,error:2,passageId:t.roadId}})},taskMessage:function(t){console.log(t),this.$router.push({path:"/taskMessage",query:{title:t.taskName,id:t.id}})},seeTaskLink:function(t,e){var a=this;this.dialogFormVisible1=!this.dialogFormVisible1,console.log(t),this.taskId=t.id,this.roadId=t.roadId,Object(c.b)("/personalNoTaskChannel/listByTaskId/"+this.taskId+"/").then(function(e){console.log(e);var s="";0===e.data.length?(a.channelName="默认",a.showHidden=!0):(a.channelName=e.data[0].channelName,a.showHidden=!1),0!==e.data.length?(s=2,a.opt=e.data,console.log("我是渠道ID："+e.data[0].id),Object(c.b)("/wxShortUrl?openid="+Object(r.b)("p_openid")+"&roadId="+t.id+"&id="+e.data[0].id+"&flag="+s).then(function(t){if(""==t.data.url)a.$message({type:"error",message:"二维码生成失败了呢，请稍后重试！！！"});else{a.shortUrl=t.data.url,a.copyLink=a.shortUrl;var e=Object(l.a)({data:decodeURIComponent(a.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(e)}}).catch(function(t){a.$message({type:"error",message:t.message})})):(s=1,a.opt=e.data,Object(c.b)("/wxShortUrl?openid="+Object(r.b)("p_openid")+"&id="+t.id+"&flag="+s).then(function(t){a.shortUrl=t.data.url,a.copyLink=a.shortUrl;var e=Object(l.a)({data:decodeURIComponent(a.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(e)}).catch(function(t){a.$message({type:"error",message:t.message})}))}).catch(function(t){a.$message({type:"error",message:t.message})})},taskSure:function(){this.link=!this.link},taskCancel:function(){this.link=!this.link},taskDataSure:function(){this.seeData=!this.seeData}},components:{Loading:s.a,"v-pagination":o.a}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personalTask"},[a("div",{staticClass:"select-wrapper"},[a("div",{staticClass:"query-wrapper"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectOne},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.opt,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"taskSearch"},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.taskVal,callback:function(e){t.taskVal=e},expression:"taskVal"}}),t._v(" "),a("span",{staticClass:"taskSpan",on:{click:t.personTaskSearch}},[t._v("搜索")])],1)]),t._v(" "),t.Fans.length>0?a("div",{staticClass:"pul-wrapper"},[a("ul",{staticClass:"pulEvery"},t._l(t.Fans.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),function(e,s){return a("li",{key:s,staticClass:"li1"},[1===e.activityType?a("span",{staticClass:"yijieshu"},[t._v("已结束")]):t._e(),t._v(" "),a("div",{staticClass:"pul-top clearfix"},[a("div",{staticClass:"pul-left"},[a("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(e.taskName))])]),t._v(" "),0===e.activityType?a("div",{staticClass:"pul-right"},[a("ul",[a("li",{on:{click:function(a){return t.seeperData(e)}}},[a("i",{staticClass:"iconfont icon-chakan"}),t._v(" "),a("span",[t._v("查看数据")])]),t._v(" "),a("li",{on:{click:function(a){return t.personalTaskDetails(e)}}},[a("i",{staticClass:"iconfont icon-fuzhi pd10"}),t._v(" "),a("span",[t._v("复制")])]),t._v(" "),a("li",{staticStyle:{width:"150px"},on:{click:function(a){return t.seeTaskLink(e)}}},[a("i",{staticClass:"iconfont icon-chakan pd10"}),t._v(" "),a("span",[t._v("查看任务链接")])]),t._v(" "),a("li",{on:{click:function(a){return t.editTask(e)}}},[a("i",{staticClass:"iconfont icon-bianji pd10"}),t._v(" "),a("span",[t._v("编辑")])]),t._v(" "),a("li",{on:{click:function(a){return t.endTask(e)}}},[a("i",{staticClass:"iconfont icon-jieshu pd10"}),t._v(" "),a("span",[t._v("结束")])])])]):a("div",{staticClass:"pul-right"},[a("ul",[a("li",{on:{click:function(a){return t.personalTaskDetails(e)}}},[a("i",{staticClass:"iconfont icon-fuzhi pd10"}),t._v(" "),a("span",[t._v("复制")])]),t._v(" "),a("li",{on:{click:function(a){return t.seeperData(e)}}},[a("i",{staticClass:"iconfont icon-chakan"}),t._v(" "),a("span",[t._v("查看数据")])])])])]),t._v(" "),a("div",{staticClass:"pul-con"},[a("div",{staticClass:"pul-person-top"},[a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[t._v("截止时间：")]),t._v(" "),a("span",{staticClass:"item-content"},[t._v(t._s(e.taskEndTime))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[t._v("粉丝标签：")]),t._v(" "),a("span",{staticClass:"item-content"},[t._v(t._s(e.noLable))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[t._v("任务主题：")]),t._v(" "),a("span",{staticClass:"item-content"},[t._v(t._s(e.taskTheme))])]),t._v(" "),t._m(0,!0)]),t._v(" "),a("div",{staticClass:"pul-person-top"},[a("div",{staticClass:"item"},[a("span",{staticClass:"item-title",staticStyle:{flex:"2"}},[t._v("参与任务个人号数：")]),t._v(" "),a("span",{staticClass:"item-content",staticStyle:{flex:"1",color:"red","font-weight":"700"}},[t._v(t._s(e.personalNum))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[t._v("参与任务渠道数：")]),t._v(" "),a("span",{staticClass:"item-content",staticStyle:{color:"red","font-weight":"700"}},[t._v(t._s(e.channelNum))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[t._v("回复入群类别：")]),t._v(" "),e.categoryName1?a("span",{staticClass:"item-content",staticStyle:{color:"red","font-weight":"700"}},[t._v(t._s(e.categoryName1))]):a("span",{staticClass:"item-content"},[t._v("暂无群类别")])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[t._v("开课入群类别：")]),t._v(" "),e.categoryName2?a("span",{staticClass:"item-content",staticStyle:{color:"red","font-weight":"700"}},[t._v(t._s(e.categoryName2))]):a("span",{staticClass:"item-content"},[t._v("暂无群类别")])])])])])}),0),t._v(" "),a("v-pagination",{directives:[{name:"show",rawName:"v-show",value:t.Fans.length,expression:"Fans.length"}],attrs:{total:t.total,"current-page":t.current,num:t.total},on:{pagechange:t.pagechange,go:t.go}})],1):a("div",{staticClass:"noData"},[t._v("暂无数据")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.noLoading,expression:"noLoading"}]},[a("loading")],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑个人号任务结束跳转链接",width:"30%",center:"",visible:t.link},on:{"update:visible":function(e){t.link=e}}},[a("div",{staticStyle:{"padding-bottom":"10px"}},[t._v("填写个人号任务结束后的跳转链接：")]),t._v(" "),a("el-input",{model:{value:t.writeLink,callback:function(e){t.writeLink=e},expression:"writeLink"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:t.taskSure}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.taskCancel}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"查看数据",center:"",visible:t.seeData},on:{"update:visible":function(e){t.seeData=e}}},[a("div",{staticClass:"personView"},[a("div",{staticClass:"diaOne"},[a("ul",{staticClass:"diaulOne"},[a("li",[t._v("点击链接人数")]),t._v(" "),a("li",[t._v("推送个人号任务")]),t._v(" "),a("li",[t._v("加好友人数")])]),t._v(" "),a("ul",{staticClass:"diaulTwo"},[a("li",[t._v(t._s(t.totalData.clickUrlNum))]),t._v(" "),a("li",[t._v(t._s(t.totalData.toPeopleNum))]),t._v(" "),a("li",[t._v(t._s(t.totalData.peopleNum))])])]),t._v(" "),a("div",{staticClass:"diaTwo"},[t.taskList.length>0?a("ul",{staticClass:"diaulTce"},[a("ul",{staticClass:"diaulOne"},[a("li",[t._v("昵称")]),t._v(" "),a("li",[t._v("推送人数")]),t._v(" "),a("li",[t._v("加好友人数")])]),t._v(" "),t._l(t.taskList,function(e,s){return a("li",{key:s},[a("ul",{staticClass:"diaulTwice"},[a("li",[t._v(t._s(e.personalNoName))]),t._v(" "),a("li",[t._v(t._s(e.toPeopleNum))]),t._v(" "),a("li",[t._v(t._s(e.peopleNum))])])])})],2):a("ul",{staticClass:"diaulTce"},[a("li",{staticClass:"noData"},[t._v("暂无数据")])])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:t.taskDataSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"二维码操作",center:"",visible:t.dialogFormVisible1},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[a("el-button",{attrs:{type:"primary",disabled:t.showHidden},on:{click:t.selectChannel}},[t._v("选择渠道")]),t._v(" "),a("el-dialog",{attrs:{title:"选择渠道",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"推广渠道"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.qudao},model:{value:t.personRboot,callback:function(e){t.personRboot=e},expression:"personRboot"}},t._l(t.opt,function(t){return a("el-option",{key:t.id,attrs:{label:t.channelName,value:t}})}),1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:t.channelSubmit}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.channelCancel}},[t._v("取 消")])],1)],1),t._v(" "),a("div",{staticClass:"diaImg",staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticClass:"qrcodeStyle",staticStyle:{width:"140px",height:"140px","margin-top":"10px","margin-right":"20px","text-align":"center"},attrs:{id:"qrcode"}}),t._v(" "),a("div",{staticClass:"ctrlS"},[a("span",{staticClass:"ewm",staticStyle:{"margin-bottom":"0.2rem","text-align":"left"}},[t._v("渠道名："+t._s(t.channelName))]),t._v(" "),a("span",{staticClass:"ewmlink"},[t._v("微信短链接："),a("em",{staticClass:"linka",staticStyle:{color:"orange"}},[t._v(t._s(t.copyLink))])]),t._v(" "),a("label",{staticClass:"copy",on:{click:function(e){return t.copyConLick(t.copyLink,e)}}},[t._v("复制")])])]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible1=!1}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogFormVisible1=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"}),this._v(" "),e("span",{staticClass:"item-content"})])}]};var u=a("C7Lr")(d,p,!1,function(t){a("R3Xb")},"data-v-20dd5103",null);e.default=u.exports}});