webpackJsonp([6],{"+Qtw":function(e,t){},"1aXU":function(e,t){},KNUy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("y/jF"),i=a("4KuQ"),n=a("T452"),o=a("SthE"),l=a("8EyE"),r=a("dybo"),c=a("Y8t/"),d={name:"personalPassage",data:function(){return{showHidden:!1,channelName:"",innerVisible:!1,channelListChange:[],personRboot:"",opt:[],current:1,checkedSeeTask:!1,yulanEWM1:!1,registerAvatar:"",imageName:"",copyLink:"",dialogFormVisible1:!1,width:"width01",pagesize:20,total:0,currentPage:1,listOne:[{title:"通道名称"},{title:"Banner地址"},{title:"创建时间"},{title:"点击通道次数"},{title:"ip去重点击数"},{title:"操作"}],minilist:[],noData:!1,passage:!1,title:"新增通道",passageName:"",no:0,id:"",passTaskList:[],roadId:""}},created:function(){var e=this;Object(c.c)("/create/personalNoRoad/1/20/",{}).then(function(t){console.log(t),t.code===n.a?e.$message({type:"error",message:"数据出问题了哦，请稍后重试!!"}):(e.minilist=t.data.records,e.total=t.data.total)}).catch(function(t){e.$message({type:"error",message:t.message})})},inject:["reload"],methods:{channelSubmit:function(){var e=this,t=Object(l.b)("p_openid");Object(c.b)("/wxShortUrl?openid="+t+"&id="+this.taskChannelId+"&flag=3&roadId="+this.roadId).then(function(t){e.shortUrl=t.data.url,e.copyLink=e.shortUrl;var a=Object(o.a)({data:decodeURIComponent(e.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(a),e.innerVisible=!e.innerVisible}).catch(function(t){e.$message({type:"error",message:t.message})})},qudao:function(e){console.log(e),this.taskChannelId=e.id,this.channelName=e.channelName,this.personRboot=e.channelName},channelCancel:function(){this.innerVisible=!this.innerVisible},selectChannel:function(){this.innerVisible=!this.innerVisible},selectChannelChange:function(e){console.log(e),this.personRboot=e.id},go:function(e){var t=this;console.log(e);Object(c.c)("/create/personalNoRoad/"+e+"/20/",{}).then(function(e){console.log(e),t.minilist=e.data.records}).catch(function(e){t.$message({type:"error",message:e.message})})},pagechange:function(e){var t=this;console.log(e);Object(c.c)("/create/personalNoRoad/"+e+"/20/",{}).then(function(e){console.log(e),t.minilist=e.data.records}).catch(function(e){t.$message({type:"error",message:e.message})})},newAddPersonPassage:function(){this.title="新增通道",this.no=0,this.passage=!this.passage},passageEidt:function(e){console.log(e),this.title="编辑通道",this.no=1,this.passage=!this.passage,this.passageName=e.roadName,this.src=e.roadBackground,this.id=e.id,this.registerAvatar=e.roadBackground},passageLink:function(e){var t=this,a=e.id;this.roadId=e.id,Object(c.b)("/personalNoTaskChannel/listByRoadId/"+e.id+"/").then(function(s){var i="";0===s.data.length?(t.channelName="默认",t.showHidden=!0):(t.channelName=s.data[0].channelName,t.showHidden=!1),0!==s.data.length?(t.opt=s.data,i=Object(l.b)("p_openid"),t.dialogFormVisible1=!t.dialogFormVisible1,console.log(a),Object(c.b)("/wxShortUrl?openid="+i+"&roadId="+a+"&flag=3&id="+t.opt[0].id).then(function(e){t.shortUrl=e.data.url,console.log(t.shortUrl),t.copyLink=t.shortUrl;var a=Object(o.a)({data:decodeURIComponent(t.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(a)}).catch(function(e){t.$message({type:"error",message:e.message})})):(i=Object(l.b)("p_openid"),t.dialogFormVisible1=!t.dialogFormVisible1,Object(c.b)("/wxShortUrl?openid="+i+"&id="+e.id+"&flag=0").then(function(e){t.shortUrl=e.data.url,console.log(t.shortUrl),t.copyLink=t.shortUrl;var a=Object(o.a)({data:decodeURIComponent(t.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(a)}).catch(function(e){t.$message({type:"error",message:e.message})}))}).catch(function(e){t.$message({type:"error",message:e.message})})},handleSizeChange:function(e){console.log(e),this.pagesize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e},copyConLick:function(e,t){console.log(e),Object(i.a)(e,t)},getFile1:function(e){var t=this,a=e.target.files[0];if(this.imageName=a.name,e&&window.FileReader){var s=new FileReader;s.readAsDataURL(a),s.onloadend=function(){var e=this;t.src=this.result,t.$message({showClose:!0,message:"图片压缩中.....",duration:0}),Object(c.c)("/upload/imageUpload",t.src).then(function(a){console.log(a),a.code===n.a?e.$message({type:"error",message:"图片上传"+a.message}):(t.$message.closeAll(),t.$message({type:"success",message:"图片上传成功"}),t.registerAvatar=a.data)}).catch(function(t){e.$message({type:"error",message:t.message})})}}},yulan1:function(e){console.log(e),this.yulanEWM1=!this.yulanEWM1,this.src=e},passageSure:function(){var e=this;if(""==this.passageName)this.$message({type:"error",message:"请输入正确的通道名称..."});else if(""==this.registerAvatar)this.$message({type:"error",message:"请输上传通道背景图片..."});else{var t={};t=0===this.no?{id:"",roadName:this.passageName,roadBackground:this.registerAvatar}:{id:this.id,roadName:this.passageName,roadBackground:this.registerAvatar},Object(c.c)("/create/personalNoRoad/addRoad",t).then(function(t){console.log(t),t.code===n.a?e.$message({type:"error",message:t.message}):(e.$message({type:"success",message:t.message}),e.reload(),e.passage=!e.passage)}).catch(function(t){e.$message({type:"error",message:t.message})})}},passageCancel:function(){this.passage=!this.passage,this.passageName="",this.registerAvatar="",this.personRboot=""},addPassageTask:function(e){this.$router.push({path:"/personalTaskDetails",query:{error:0,passageId:e.id}})},seeTask:function(e){var t=this;Object(c.b)("/personal/noTask/getByRoadId/"+e.id+"/").then(function(e){e.code===n.a?t.$message({type:"error",message:"此通道下还有没有个人号任务"}):(t.passTaskList=e.data.taskList,t.checkedSeeTask=!t.checkedSeeTask)})}},components:{Loading:s.a,"v-pagination":r.a}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personalPassage"},[a("div",{staticClass:"personal-add",on:{click:e.newAddPersonPassage}},[e._v("新 增 通 道")]),e._v(" "),a("div",{staticClass:"groupCategory"},[a("ul",{staticClass:"groupMingDan"},e._l(e.listOne,function(t,s){return a("li",{key:s,class:e.width},[e._v(e._s(t.title))])}),0)]),e._v(" "),e.minilist.length>0?a("div",[a("ul",{staticClass:"groupMin-wrapper"},e._l(e.minilist.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),function(t,s){return a("li",{key:s,staticClass:"groupMinLi-wrapper"},[a("ul",{staticClass:"groupMinDanCon"},[a("li",{staticClass:"groupFileName"},[e._v(e._s(t.roadName))]),e._v(" "),a("li",[e._v(e._s(t.roadBackground))]),e._v(" "),a("li",[e._v(e._s(t.roadCreateTime))]),e._v(" "),a("li",[e._v(e._s(t.clickRoadNum))]),e._v(" "),a("li",[e._v(e._s(t.lessClickRoadNum))]),e._v(" "),a("li",{staticClass:"miniHover",staticStyle:{display:"flex",flex:"2"}},[a("span",{staticClass:"miniSpa1",on:{click:function(a){return e.seeTask(t)}}},[e._v("\n                  查看任务\n                ")]),e._v(" "),a("span",{staticClass:"miniSpa1",on:{click:function(a){return e.passageEidt(t)}}},[e._v("\n                 编 辑\n                ")]),e._v(" "),a("span",{staticClass:"miniSpa1",on:{click:function(a){return e.passageLink(t)}}},[e._v("\n                 通道链接\n                ")]),e._v(" "),a("span",{staticClass:"miniSpa1",on:{click:function(a){return e.addPassageTask(t)}}},[e._v("\n                 添加任务\n                ")])])])])}),0),e._v(" "),a("v-pagination",{directives:[{name:"show",rawName:"v-show",value:e.minilist.length,expression:"minilist.length"}],attrs:{total:e.total,"current-page":e.current,num:e.total},on:{pagechange:e.pagechange,go:e.go}})],1):a("div",{staticClass:"noData"},[e._v("暂无数据")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.noData,expression:"noData"}]},[a("loading")],1),e._v(" "),a("el-dialog",{attrs:{title:"通道二维码",center:"",visible:e.dialogFormVisible1},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("el-button",{attrs:{type:"primary",disabled:e.showHidden},on:{click:e.selectChannel}},[e._v("选择渠道")]),e._v(" "),a("el-dialog",{attrs:{title:"选择渠道",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"推广渠道"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.qudao},model:{value:e.personRboot,callback:function(t){e.personRboot=t},expression:"personRboot"}},e._l(e.opt,function(e){return a("el-option",{key:e.id,attrs:{label:e.channelName,value:e}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:e.channelSubmit}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.channelCancel}},[e._v("取 消")])],1)],1),e._v(" "),a("div",{staticClass:"diaImg",staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticClass:"qrcodeStyle",staticStyle:{width:"140px",height:"140px","margin-top":"10px","margin-right":"20px","text-align":"center"},attrs:{id:"qrcode"}}),e._v(" "),a("div",{staticClass:"ctrlS",staticStyle:{"padding-top":"20px",display:"flex","flex-direction":"column","text-align":"center"}},[a("span",{staticClass:"ewm",staticStyle:{"margin-bottom":"0.2rem","text-align":"left"}},[e._v("渠道名："+e._s(e.channelName))]),e._v(" "),a("span",{staticClass:"ewmlink",staticStyle:{"margin-bottom":"0.2rem","text-aling":"left"}},[e._v("微信短链接："),a("em",{staticClass:"linka",staticStyle:{color:"orange","font-size":"18px","font-weight":"bold"}},[e._v(e._s(e.copyLink))])]),e._v(" "),a("label",{staticClass:"copy",on:{click:function(t){return e.copyConLick(e.copyLink,t)}}},[e._v("复制")])])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,center:"",visible:e.passage},on:{"update:visible":function(t){e.passage=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"通道名称：","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入通道名称，15字以内",maxlength:"20"},model:{value:e.passageName,callback:function(t){e.passageName=t},expression:"passageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Banner图：","label-width":"120px"}},[a("div",{staticClass:"uploadImg",staticStyle:{display:"flex","flex-direction":"row"}},[a("span",{staticStyle:{overflow:"hidden",display:"inline-block",flex:"1","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v(e._s(e.registerAvatar))]),e._v(" "),a("input",{ref:"file",attrs:{type:"file",id:"file1"},on:{change:function(t){return e.getFile1(t)}}}),e._v(" "),a("label",{staticClass:"upload",attrs:{for:"file1"}},[e._v("上传文件")]),e._v(" "),a("label",{staticClass:"yulan",on:{click:function(t){return e.yulan1(e.registerAvatar)}}},[e._v("预览")])]),e._v(" "),a("el-dialog",{attrs:{visible:e.yulanEWM1,width:"20%","append-to-body":""},on:{"update:visible":function(t){e.yulanEWM1=t}}},[a("img",{staticClass:"imgWEM",attrs:{src:e.registerAvatar}})])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:e.passageSure}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"orange",on:{click:e.passageCancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"当前通道下的任务",width:"30%",center:"",visible:e.checkedSeeTask},on:{"update:visible":function(t){e.checkedSeeTask=t}}},[a("div",{staticClass:"checked-wrapper"},[e.passTaskList.length>0?a("ul",{staticClass:"checkedWrapper"},[a("li",[a("ul",{staticClass:"checkUl"},[a("li",[e._v("任务名称")]),e._v(" "),a("li",[e._v("任务主题")])])]),e._v(" "),e._l(e.passTaskList,function(t,s){return a("li",{key:s,staticClass:"checkedWrapper-li"},[a("ul",{staticClass:"checkedWrapper-ul"},[a("li",[e._v(e._s(t.taskName))]),e._v(" "),a("li",[e._v(e._s(t.taskTheme))])])])})],2):a("ul",{staticClass:"checkedWrapper"},[a("li",{staticClass:"noData"},[e._v("暂无数据")])])])])],1)},staticRenderFns:[]};var p=a("C7Lr")(d,g,!1,function(e){a("+Qtw"),a("1aXU")},"data-v-af3050ae",null);t.default=p.exports}});