webpackJsonp([21],{"+Ok+":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("T452"),r=t("8EyE"),l=t("Y8t/"),o={name:"register",data:function(){return{registerAvatar:"",username:"",password:"",passwordNew:"",clientHeight:"",blongQR:"",src:"",upLoadVal:"",yulanEWM:!1}},mounted:function(){this.clientHeight=""+document.documentElement.clientHeight,window.onresize=function(){this.clientHeight=""+document.documentElement.clientHeight}},watch:{clientHeight:function(){this.changeFixed(this.clientHeight)}},methods:{handleUpOrDel:function(e){var s="";if(e)for(var t=0;t<e.length;t++){console.log(e[t].response);var a=e[t].response;a&&a.code&&(s+=a.record.successResponse[0].id,t<e.length-1&&(s+=","))}return s},changeFixed:function(e){this.$refs.register.style.height=e+"px"},onsubmit:function(){var e=this;if(this.password!==this.passwordNew)this.$message({type:"error",message:"两次输入密码不一致，请重新输入"}),this.passwordNew="";else if(""===this.blongQR)this.$message({type:"error",message:"专属码不能为空"});else{var s={superName:this.username,password:this.password,code:this.blongQR,headPortrait:this.registerAvatar};Object(l.c)("/personalNoSuperuesr/register",s).then(function(s){console.log(s),s.code===a.a?(e.$message({type:"error",message:"注册"+s.message}),e.username="",e.password="",e.passwordNew="",e.blongQR=""):(e.$message({type:"success",message:"注册"+s.message+"!"}),setTimeout(function(){e.$router.push({path:"/login",query:{}})},1e3))}).catch(function(e){console.log(e),this.$message({type:"error",message:"注册失败，请重新注册"}),this.username="",this.password="",this.passwordNew="",this.blongQR=""})}},getFile:function(e){var s=this,t=e.target.files[0];if(console.log(e.target.value),this.upLoadVal=t.name,e&&window.FileReader){var o=new FileReader;o.readAsDataURL(t),o.onloadend=function(){var e=this;s.src=this.result,console.log(s.src),localStorage.setItem("imageSrc",s.src),localStorage.setItem("imageName",t.name),s.$message({showClose:!0,message:"图片压缩中.....",duration:0}),Object(l.c)("/upload/imageUpload",s.src).then(function(t){console.log(t),t.code===a.a?e.$message({type:"error",message:"图片上传"+t.message}):(s.$message.closeAll(),s.$message({type:"success",message:"图片上传成功"}),s.registerAvatar=t.data,Object(r.c)("superuserAvatar",t.data,86400))}).catch(function(s){e.$message({type:"error",message:s.message})})}}},yulan:function(e){console.log(e),this.yulanEWM=!this.yulanEWM}}},i={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{ref:"register",staticClass:"register"},[t("div",{staticClass:"bgopacity"}),e._v(" "),t("div",{staticClass:"res-formList"},[t("span",{staticClass:"res-title"},[e._v("注 册")]),e._v(" "),t("el-form",[t("el-form-item",{attrs:{label:"用户名:","label-width":"100px"}},[t("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码:","label-width":"100px"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码",clearable:""},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码:","label-width":"100px"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入密码",clearable:""},model:{value:e.passwordNew,callback:function(s){e.passwordNew=s},expression:"passwordNew"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"专属码:","label-width":"100px"}},[t("el-input",{attrs:{placeholder:"请输专属码",clearable:""},model:{value:e.blongQR,callback:function(s){e.blongQR=s},expression:"blongQR"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"头像上传:","label-width":"100px"}},[t("span",[e._v(e._s(e.upLoadVal))]),e._v(" "),t("input",{ref:"file",attrs:{type:"file",multiple:"multiple",id:"file"},on:{change:e.getFile}}),e._v(" "),t("label",{staticClass:"upload",attrs:{for:"file"}},[e._v("上传头像")]),e._v(" "),t("label",{staticClass:"yulan",on:{click:function(s){return e.yulan(e.src)}}},[e._v("预览")])]),e._v(" "),t("el-button",{on:{click:e.onsubmit}},[e._v("提交")])],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.yulanEWM,width:"30%","append-to-body":""},on:{"update:visible":function(s){e.yulanEWM=s}}},[t("img",{staticClass:"imgWEM",attrs:{src:e.src}})])],1)},staticRenderFns:[]};var n=t("C7Lr")(o,i,!1,function(e){t("ydjB"),t("HzrX")},"data-v-392a0b9c",null);s.default=n.exports},HzrX:function(e,s){},ydjB:function(e,s){}});