webpackJsonp([19],{"0ZLG":function(e,s){},ML8H:function(e,s){},lQmO:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("T452"),i=t("8EyE"),o=t("Y8t/"),l={name:"addFriendsManger",data:function(){return{dis:!1,cover:"",kouweiSpan:0,showPP:!0,personHe:"",personNum:"",noPersonClass:!1,linkUrls:"",yulanEWM:!1,upLoadVals:"",src:"",gai:!0,shows:!0,img:[],upLoadVal:"",addFriendsWord:"",addImgLink:"img",editDate2:"",editTimeXuan2:"",checked:!1,addFriendsTheme:"",firstShow:!1,checkAll:!1,checkedCities:[],isIndeterminate:!0,setList:[],list:[],registerAvatar:""}},inject:["reload"],created:function(){var e=this;if(1===this.$route.query.errno||2===this.$route.query.errno){Object(o.c)("/noFriendsCircleManager/"+this.$route.query.id,{}).then(function(s){console.log(s),s.data.autoSend&&(e.checked=!0),s.data.photoList&&(e.gai=!0,e.addImgLink="img"),s.data.cardUrl&&(e.gai=!1,e.addImgLink="link"),s.data.personalList&&(e.noPersonClass=!0,e.personNum=s.data.personalList.length,e.checkedCities=s.data.personalList),e.dada1=s.data.autoSend,e.titi1=s.data.autoSend,e.editDate2=s.data.autoSend,e.editTimeXuan2=s.data.autoSend,e.linkUrls=s.data.cardUrl,e.cover=s.data.cardUrlCover,e.addFriendsWord=s.data.friendsCircleOfficial,e.addFriendsTheme=s.data.friendsCircleTheme,e.checkedCities=s.data.personalList,e.img=s.data.photoList}).catch(function(s){e.$message({type:"error",message:s.message})})}2===this.$route.query.errno&&(this.dis=!0)},methods:{sure:function(){var e=this;if(""==this.addFriendsTheme)this.$message({type:"error",message:"请输入朋友圈主题"});else if(""==this.checkedCities)this.$message({type:"error",message:"请选择个人号"});else if(""==this.addFriendsWord)this.$message({type:"error",message:"请输入朋友圈文案"});else{var s={};s=!1===this.checked?{superId:Object(i.b)("p_superId"),autoSend:"",cardUrl:this.linkUrls,cardUrlCover:this.cover,friendsCircleOfficial:this.addFriendsWord,friendsCircleTheme:this.addFriendsTheme,personalList:this.checkedCities,photoList:this.img}:{superId:Object(i.b)("p_superId"),autoSend:this.dada1+" "+this.titi1,cardUrl:this.linkUrls,cardUrlCover:this.cover,friendsCircleOfficial:this.addFriendsWord,friendsCircleTheme:this.addFriendsTheme,personalList:this.checkedCities,photoList:this.img},Object(o.c)("/noFriendsCircleManager/addCircle",s).then(function(s){console.log(s),s.code===a.a?e.$message({type:"error",message:s.message}):(e.$message({type:"success",message:s.message}),setTimeout(function(){e.$router.push({path:"/friendshipManger"})}))}).catch(function(s){e.$message({type:"error",message:s.message})})}},cancelManger:function(){this.$router.push({path:"/friendshipManger"}),this.reload()},getFiles:function(e){var s=this,t=e.target.files[0];if(console.log(t),this.upLoadVals=t.name,e&&window.FileReader){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(){var e=this;s.src=this.result,s.$message({showClose:!0,message:"图片压缩中.....",duration:0}),Object(o.c)("/upload/imageUpload",s.src).then(function(t){console.log(t),t.code===a.a?e.$message({type:"error",message:"图片上传"+t.message}):(s.$message.closeAll(),s.$message({type:"success",message:"图片上传成功"}),s.cover=t.data)}).catch(function(s){e.$message({type:"error",message:s.message})})}}},yulans:function(e){console.log(e),this.yulanEWM=!this.yulanEWM},close:function(e){console.log(e),this.img.splice(e,1)},getFile:function(e){var s=this,t=e.target.files;console.log(t);for(var i=0;i<t.length;i++){if(this.upLoadVal=t[i].name,!e||!window.FileReader)return;var l=new FileReader;l.readAsDataURL(t[i]),l.onloadend=function(){var e=this;s.src=this.result,s.$message({showClose:!0,message:"图片压缩中.....",duration:0}),Object(o.c)("/upload/imageUpload",s.src).then(function(t){console.log(t),t.code===a.a?e.$message({type:"error",message:"图片上传"+t.message}):(s.$message.closeAll(),s.$message({type:"success",message:"图片上传成功"}),s.registerAvatar=t.data,s.img.push({photo:t.data}))}).catch(function(s){e.$message({type:"error",message:s.message})})}}this.img.length>7&&(this.shows=!1)},selectPersonTask:function(e){var s=this;1===e&&(this.checkedCities=[]),Object(o.b)("/personalCategoryManager").then(function(e){console.log(e),s.list=e.data,Object(o.b)("/personalManager/getByCategory/"+s.list[0].personalNoCategory+"/1/2/").then(function(e){console.log(e),s.setList=e.data}).catch(function(e){s.$message({type:"error",message:e.message})})}).catch(function(e){s.$message({type:"error",message:e.message})}),this.firstShow=!this.firstShow},leftMenuTask:function(e,s){var t=this;console.log(e),console.log(s),this.kouweiSpan=s,this.userIndex=s,Object(o.b)("/personalManager/getByCategory/"+e.personalNoCategory+"/1/2/").then(function(e){console.log(e),t.setList=e.data}).catch(function(e){t.$message({type:"error",message:e.message})})},handleCheckedCitiesChange:function(e){console.log(e),this.checkedCities=e;var s=e.length;this.personNum=s,this.checkAll=s===this.setList.length,this.isIndeterminate=s>0&&s<this.setList.length},setGroupSure:function(){this.firstShow=!this.firstShow,this.noPersonClass=!0},editSelectDate:function(e){console.log(e);var s=new Date(e),t=s.getFullYear(),a=s.getMonth()+1;a=a<10?"0"+a:a;var i=s.getDate()<10?"0"+s.getDate():s.getDate();console.log(t+"-"+a+"-"+i),this.dada1=t+"-"+a+"-"+i},editSelectTimes:function(e){console.log(e);var s=new Date(e),t=s.getHours()<10?"0"+s.getHours():s.getHours(),a=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes(),i=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds();console.log(t+":"+a+":"+i),this.titi1=t+":"+a+":"+i},addImgChange:function(e){console.log(e),"img"===e?(this.addImgLink=e,this.gai=!this.gai):(this.gai=!this.gai,this.addImgLink=e)}}},n={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"addFriendsManger"},[t("div",{staticClass:"circle_header"},[t("router-link",{staticClass:"sp1",attrs:{to:"/friendshipManger",tag:"span"}},[e._v("朋友圈管理")]),e._v("\n    >\n    "),t("span",[e._v("新增")])],1),e._v(" "),t("div",{staticClass:"circle_body"},[t("el-form",[t("el-form-item",{attrs:{label:"朋友圈主题：","label-width":"150px"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"输入朋友圈主题",disabled:e.dis},model:{value:e.addFriendsTheme,callback:function(s){e.addFriendsTheme=s},expression:"addFriendsTheme"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"选择个人号：","label-width":"150px"}},[!1===e.noPersonClass?t("span",{staticClass:"selectPer",on:{click:function(s){return e.selectPersonTask(0)}}},[t("i",{staticClass:"iconfont icon-liebiao"}),e._v("选择个人号")]):t("div",{staticStyle:{display:"flex","flex-direction":"row"}},[t("span",{staticStyle:{"margin-right":"20px"}},[e._v("个人号已选择 "+e._s(e.personNum)+" 个")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.dis,expression:"dis === false"}],staticClass:"selectPer",on:{click:function(s){return e.selectPersonTask(1)}}},[t("i",{staticClass:"iconfont icon-liebiao"}),e._v("修改")]),e._v(" "),t("el-select",{directives:[{name:"show",rawName:"v-show",value:this.checkedCities.length>0,expression:"this.checkedCities.length > 0"}],staticStyle:{"margin-left":"20px",width:"60%"},attrs:{placeholder:"选择的个人号列表如下："},model:{value:e.personHe,callback:function(s){e.personHe=s},expression:"personHe"}},e._l(e.checkedCities,function(s){return t("el-option",{key:s.personalNoName,attrs:{disabled:e.showPP,label:s.personalNoName,value:s.personalNoName}})}),1)],1)]),e._v(" "),t("el-form-item",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{label:"","label-width":"150px"}},[t("el-checkbox",{model:{value:e.checked,callback:function(s){e.checked=s},expression:"checked"}},[e._v("定时发送：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}]},[t("el-date-picker",{attrs:{disabled:e.dis,type:"date",placeholder:"选择日期"},on:{change:e.editSelectDate},model:{value:e.editDate2,callback:function(s){e.editDate2=s},expression:"editDate2"}}),e._v(" "),t("el-time-picker",{attrs:{disabled:e.dis,format:"HH:mm:ss",placeholder:"选择时间"},on:{change:e.editSelectTimes},model:{value:e.editTimeXuan2,callback:function(s){e.editTimeXuan2=s},expression:"editTimeXuan2"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"朋友圈文案：","label-width":"150px"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",disabled:e.dis,autosize:{minRows:4,maxRows:6},placeholder:"请输入朋友圈文本内容"},model:{value:e.addFriendsWord,callback:function(s){e.addFriendsWord=s},expression:"addFriendsWord"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"配图或链接：","label-width":"150px"}},[t("el-radio-group",{on:{change:e.addImgChange},model:{value:e.addImgLink,callback:function(s){e.addImgLink=s},expression:"addImgLink"}},[t("el-radio",{attrs:{label:"img"}},[e._v("配图")]),e._v(" "),t("el-radio",{attrs:{label:"link"}},[e._v("卡片链接")])],1)],1),e._v(" "),!0===e.gai?t("el-form-item",{attrs:{label:"","label-width":"150px"}},[t("div",{staticClass:"imgList"},[t("ul",{staticStyle:{margin:"0",padding:"0",overflow:"hidden"}},e._l(e.img,function(s,a){return t("li",{key:a},[t("i",{staticClass:"el-icon-circle-close",on:{click:function(s){return e.close(a)}}}),e._v(" "),t("img",{attrs:{src:s.photo}})])}),0)]),e._v(" "),t("input",{ref:"file",attrs:{type:"file",multiple:"multiple",id:"file"},on:{change:e.getFile}}),e._v(" "),t("label",{directives:[{name:"show",rawName:"v-show",value:e.shows,expression:"shows"}],staticClass:"uploadNumImg",attrs:{for:"file"}},[t("i",{staticClass:"el-icon-upload"}),e._v(" "),t("div",{staticClass:"upload_test"},[e._v("上传文件")])]),e._v(" "),t("label",{staticStyle:{width:"202px","text-align":"center",display:"block",color:"red"}},[e._v("(提示: 最多可上传9张图)")])]):t("el-form-item",{attrs:{label:"","label-width":"150"}},[t("div",{staticClass:"newBigCon"},[t("div",{staticClass:"newTop"},[t("ul",[t("li",[e._v("链接")])])]),e._v(" "),t("div",{ref:"newBottom",staticClass:"newBottom"},[t("div",{staticClass:"newWords"},[t("i",{staticClass:"iconfont icon-lianjie"}),e._v(" "),t("el-input",{attrs:{maxlength:"800",placeholder:"添加链接"},model:{value:e.linkUrls,callback:function(s){e.linkUrls=s},expression:"linkUrls"}}),e._v(" "),t("div",{staticClass:"uploadImg"},[t("input",{ref:"file",attrs:{type:"file",id:"files"},on:{change:e.getFiles}}),e._v(" "),t("label",{staticClass:"upload",attrs:{for:"files"}},[e._v("上传文件")]),e._v(" "),t("label",{staticClass:"yulan",on:{click:function(s){return e.yulans(e.cover)}}},[e._v("预览")])]),e._v(" "),t("el-dialog",{attrs:{visible:e.yulanEWM,width:"20%"},on:{"update:visible":function(s){e.yulanEWM=s}}},[t("img",{staticClass:"imgWEM",attrs:{src:e.cover}})])],1),e._v(" "),t("div",{staticClass:"fission"}),e._v(" "),t("span",{staticStyle:{color:"red"}},[e._v("每次发送不能超过5条消息")])])])])],1)],1),e._v(" "),t("div",{staticClass:"footer"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.dis,expression:"dis === false"}],staticClass:"queDing",on:{click:e.sure}},[e._v("确 定")]),e._v(" "),t("span",{staticClass:"quXiao",on:{click:e.cancelManger}},[e._v("取 消")])]),e._v(" "),t("el-dialog",{attrs:{title:"选择个人号",center:"",visible:e.firstShow,width:"50%"},on:{"update:visible":function(s){e.firstShow=s}}},[t("div",{staticClass:"selectDia"},[t("div",{staticClass:"selectGroupName"}),e._v(" "),t("div",{staticClass:"GroupList"},[t("div",{staticClass:"groupLeft"},[t("ul",{staticClass:"leftUl"},[t("li",{staticStyle:{"text-align":"center","background-color":"#fff"}},[e._v("个人号类别")]),e._v(" "),e._l(e.list,function(s,a){return t("li",{key:a,class:{on:a==e.kouweiSpan},on:{click:function(t){return e.leftMenuTask(s,a)}}},[t("i",{staticClass:"iconfont icon-guanliyuan",class:{on:a==e.kouweiSpan}}),e._v(e._s(s.personalNoCategory))])})],2)]),e._v(" "),t("div",{staticClass:"groupRight"},[t("div",{staticClass:"groupcName"},[e._v("个人号昵称")]),e._v(" "),t("div",{staticClass:"rightRadio"},[t("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(s){e.checkedCities=s},expression:"checkedCities"}},e._l(e.setList,function(s,a){return t("el-checkbox",{key:a,attrs:{label:s}},[e._v(e._s(s.personalNoName))])}),1)],1)])])]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.setGroupSure}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(s){e.firstShow=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var r=t("C7Lr")(l,n,!1,function(e){t("ML8H"),t("0ZLG")},"data-v-42b1ba48",null);s.default=r.exports}});