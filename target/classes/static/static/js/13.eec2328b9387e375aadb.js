webpackJsonp([13],{BOpl:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("T452"),s={name:"addKeyWord",data:function(){return{tuName:"",goP:!1,groupSet:"",keyWord:"",groupV:"",groupCategory:[],reContentVal:[{content:"",contentType:"文字"}],yulanEWM1:!1,groupCategorySet:[]}},created:function(){var e=this;if(1===this.$route.query.error){this.$http.post(n.d+"/personalNoKeyword/"+this.$route.query.id,{}).then(function(t){console.log(t),t.body.code===n.a?e.$message({type:"error",message:t.body.message}):(t=t.body.data,e.keyWord=t.keyword,e.reContentVal=t.keywordContentList,e.goP=!1)})}else this.goP=!0},methods:{sureSubmit:function(){var e=this,t={};t=0===this.$route.query.error?{keyword:this.keyWord,keywordContentList:this.reContentVal}:{id:this.$route.query.id,keyword:this.keyWord,keywordContentList:this.reContentVal},this.$http.post(n.d+"/personalNoKeyword/addKeyWord",t).then(function(t){console.log(t),t.body.code===n.a?e.$message({type:"error",message:t.body.message}):(e.$message({type:"success",message:t.body.message}),setTimeout(function(){e.$router.push({path:"/keyWordSet"})},1e3))})},keyCancel:function(){this.$router.push({path:"/keyWordSet"})},selectGroupSet:function(e){var t=this;console.log(e),this.$http.get(n.d+"/groupCategory/"+e+"/").then(function(e){console.log(e),e.body.code===n.a?t.$message({type:"error",message:"暂时没有群类别哦，创建一个群类别再来添加群哦"}):t.groupCategory=e.body.data})},selectGroup:function(e,t){console.log(e),console.log(t);var o=e;this.$set(this.reContentVal,t,{content:o,contentType:"邀请入群"}),console.log(this.reContentVal)},inputChangeLittle:function(e,t,o){console.log(o),this.$set(this.reContentVal,o,{content:t,contentType:"小程序"})},word:function(){this.closeShow=!0,this.reContentVal.length>4?this.$message({type:"error",message:"每次发送最多五条消息"}):this.reContentVal.push({content:"",contentType:"文字"}),this.$refs.newBottom.style.paddingTop=n.c+"px",this.$refs.newBottom.style.paddingBottom=n.c+"px"},showImg:function(){this.reContentVal.length>4?this.$message({type:"error",message:"每次发送最多五条消息"}):this.reContentVal.push({content:"",contentType:"图片"})},music:function(){var e=this;this.$http.get(n.d+"/groupCategorySet").then(function(t){console.log(t),t.body.code===n.a?e.$message({type:"error",message:"暂时没有可用的群哦"}):e.groupCategorySet=t.body.data}),this.reContentVal.length>4?this.$message({type:"error",message:"每次发送最多五条消息"}):this.reContentVal.push({content:"",contentType:"邀请入群"}),this.$refs.newBottom.style.paddingTop=n.c+"px",this.$refs.newBottom.style.paddingBottom=n.c+"px"},miniPro:function(){this.closeShow=!0,this.reContentVal.length>4?this.$message({type:"error",message:"每次发送最多五条消息"}):this.reContentVal.push({content:"",contentType:"小程序"}),this.$refs.newBottom.style.paddingTop=n.c+"px",this.$refs.newBottom.style.paddingBottom=n.c+"px"},inputChange:function(e,t,o){console.log(o),this.$set(this.reContentVal,o,{content:t,contentType:"文字"})},close:function(e){this.closeShow=!this.closeShow,this.reContentVal.splice(e,1),this.$refs.newBottom.style.paddingTop=n.a+"px",this.$refs.newBottom.style.paddingBottom=n.a+"px"},getFile1:function(e){var t=this,o=e.target.files[0];if(console.log(this.$refs.file),this.tuName=o.name,e&&window.FileReader){var s=new FileReader;s.readAsDataURL(o),s.onloadend=function(){var e=this;t.src=this.result,console.log(t.src),t.$http.post(n.d+"/upload/imageUpload",t.src).then(function(o){console.log(o),o.body.code===n.a?e.$message({type:"error",message:"图片上传"+o.body.message}):(t.registerAvatar=o.body.data,t.$set(t.reContentVal,t.indexTime,{content:o.body.data,contentType:"图片"}))})},console.log(t.reContentVal)}},uploadImgs1:function(e){console.log(e),this.indexTime=e},yulan1:function(e,t){console.log(e),console.log(t),this.indexTime===t&&(this.showIig=e),this.yulanEWM1=!this.yulanEWM1}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"addKeyWord"},[o("el-form",[o("el-form-item",{attrs:{label:"关键词：","label-width":"150px"}},[o("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"回复内容：","label-width":"150px"}},[o("div",{staticClass:"newBigCon"},[o("div",{staticClass:"newTop"},[o("ul",[o("li",{staticStyle:{width:"105px"},on:{click:e.word}},[e._v("文字")]),e._v(" "),o("li",{on:{click:e.showImg}},[e._v("图片")]),e._v(" "),o("li",{directives:[{name:"show",rawName:"v-show",value:!0===e.goP,expression:"goP === true"}],on:{"~click":function(t){return e.music(t)}}},[e._v("邀请入群")]),e._v(" "),o("li",{directives:[{name:"show",rawName:"v-show",value:!1===e.goP,expression:"goP === false"}]},[e._v("邀请入群")]),e._v(" "),o("li",{on:{click:e.miniPro}},[e._v("小程序")])])]),e._v(" "),o("div",{ref:"newBottom",staticClass:"newBottom"},[e._l(e.reContentVal,function(t,n){return o("div",{key:n},["文字"===t.contentType?o("div",{ref:"word",refInFor:!0,staticClass:"newWords"},[o("i",{staticClass:"el-icon-edit"}),e._v(" "),o("el-input",{attrs:{value:t.content,type:"textarea",maxlength:"800",autosize:{minRows:8,maxRows:14},placeholder:"请输入回复内容，不得超过800字。添加“#####”可在回复时@对应成员。"},on:{change:function(o){return e.inputChange(t,o,n)}}}),e._v(" "),o("i",{staticClass:"el-icon-circle-close relative",on:{click:function(t){return e.close(n)}}})],1):e._e(),e._v(" "),"图片"===t.contentType?o("div",{ref:"image",refInFor:!0,staticClass:"newImg"},[o("i",{staticClass:"el-icon-picture-outline"}),e._v(" "),o("div",{staticClass:"uploadImg"},[t.content?o("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v(e._s(t.content))]):o("span",[e._v(e._s(e.tuName))]),e._v(" "),o("input",{ref:"file",refInFor:!0,attrs:{type:"file",id:"file1"},on:{change:function(t){return e.getFile1(t)}}}),e._v(" "),o("label",{staticClass:"upload",attrs:{for:"file1"},on:{click:function(t){return e.uploadImgs1(n)}}},[e._v("上传文件")]),e._v(" "),o("label",{staticClass:"yulan",on:{click:function(o){return e.yulan1(t.content,n)}}},[e._v("预览")])]),e._v(" "),o("el-dialog",{attrs:{visible:e.yulanEWM1,width:"20%","append-to-body":""},on:{"update:visible":function(t){e.yulanEWM1=t}}},[o("img",{staticClass:"imgWEM",attrs:{src:t.content}})]),e._v(" "),o("i",{staticClass:"el-icon-circle-close relative",on:{click:function(t){return e.close(n)}}})],1):e._e(),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.goP,expression:"goP === false"}],staticStyle:{"margin-bottom":"10px"}},["邀请入群"===t.contentType?o("span",{ref:"goGroup",refInFor:!0,staticClass:"goGroup"},[e._v("yxl阅读")]):e._e()]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.goP,expression:"goP"}],staticStyle:{"margin-bottom":"10px"}},["邀请入群"===t.contentType?o("div",{ref:"goGroup",refInFor:!0,staticClass:"goGroup"},[o("i",{staticClass:"iconfont icon-yonghu-tianchong"}),e._v(" "),o("div",{staticClass:"groupList",staticStyle:{"margin-left":"20px"}},[o("el-select",{attrs:{placeholder:"请选择群类别集合"},on:{change:e.selectGroupSet},model:{value:e.groupSet,callback:function(t){e.groupSet=t},expression:"groupSet"}},e._l(e.groupCategorySet,function(e){return o("el-option",{key:e.sname,attrs:{label:e.sname,value:e.id}})}),1),e._v(" "),o("el-select",{attrs:{placeholder:"请选择群类别集合"},on:{change:function(t){return e.selectGroup(t,n)}},model:{value:e.groupV,callback:function(t){e.groupV=t},expression:"groupV"}},e._l(e.groupCategory,function(e){return o("el-option",{key:e.cname,attrs:{label:e.cname,value:e.id}})}),1)],1)]):e._e()]),e._v(" "),"小程序"===t.contentType?o("div",{ref:"little",refInFor:!0,staticClass:"newWords little"},[o("i",{staticClass:"el-icon-edit"}),e._v(" "),o("el-input",{staticStyle:{border:"none"},attrs:{value:t.content,placeholder:"请输入小程序链接地址"},on:{change:function(o){return e.inputChangeLittle(t,o,n)}}}),e._v(" "),o("i",{staticClass:"el-icon-circle-close relative",on:{click:function(t){return e.close(n)}}})],1):e._e()])}),e._v(" "),o("div",{staticClass:"fission"}),e._v(" "),o("span",{staticStyle:{color:"red"}},[e._v("每次发送不能超过5条消息")])],2)])])],1),e._v(" "),o("div",{staticClass:"footer"},[o("span",{staticClass:"faqi",on:{click:e.sureSubmit}},[e._v("保 存")]),e._v(" "),o("span",{staticClass:"quxiao",on:{click:e.keyCancel}},[e._v("取 消")])])],1)},staticRenderFns:[]};var a=o("C7Lr")(s,i,!1,function(e){o("fCBv"),o("TpZ4")},"data-v-5ae6a304",null);t.default=a.exports},TpZ4:function(e,t){},fCBv:function(e,t){}});