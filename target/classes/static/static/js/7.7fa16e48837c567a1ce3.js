webpackJsonp([7],{Egkm:function(e,t){},lQmO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("T452"),a=s("8EyE"),o={name:"addFriendsManger",data:function(){return{dis:!1,cover:"",kouweiSpan:0,showPP:!0,personHe:"",personNum:"",noPersonClass:!1,linkUrls:"",yulanEWM:!1,upLoadVals:"",src:"",gai:!0,shows:!0,img:[],upLoadVal:"",addFriendsWord:"",addImgLink:"img",editDate2:"",editTimeXuan2:"",checked:!1,addFriendsTheme:"",firstShow:!1,checkAll:!1,checkedCities:[],isIndeterminate:!0,checkAll1:!1,setList:[],list:[],setList1:[],registerAvatar:""}},inject:["reload"],created:function(){var e=this;if(1===this.$route.query.errno||2===this.$route.query.errno){this.$http.post(i.d+"/noFriendsCircleManager/"+this.$route.query.id,{}).then(function(t){console.log(t),t.body.data.autoSend&&(e.checked=!0),t.body.data.photoList&&(e.gai=!0,e.addImgLink="img"),t.body.data.cardUrl&&(e.gai=!1,e.addImgLink="link"),t.body.data.personalList&&(e.noPersonClass=!0,e.personNum=t.body.data.personalList.length,e.checkedCities=t.body.data.personalList),e.dada1=t.body.data.autoSend,e.titi1=t.body.data.autoSend,e.editDate2=t.body.data.autoSend,e.editTimeXuan2=t.body.data.autoSend,e.linkUrls=t.body.data.cardUrl,e.cover=t.body.data.cardUrlCover,e.addFriendsWord=t.body.data.friendsCircleOfficial,e.addFriendsTheme=t.body.data.friendsCircleTheme,e.checkedCities=t.body.data.personalList,e.img=t.body.data.photoList})}2===this.$route.query.errno&&(this.dis=!0)},methods:{sure:function(){var e=this,t={};t=!1===this.checked?{superId:Object(a.b)("p_superId"),autoSend:"",cardUrl:this.linkUrls,cardUrlCover:this.cover,friendsCircleOfficial:this.addFriendsWord,friendsCircleTheme:this.addFriendsTheme,personalList:this.checkedCities,photoList:this.img}:{superId:Object(a.b)("p_superId"),autoSend:this.dada1+" "+this.titi1,cardUrl:this.linkUrls,cardUrlCover:this.cover,friendsCircleOfficial:this.addFriendsWord,friendsCircleTheme:this.addFriendsTheme,personalList:this.checkedCities,photoList:this.img},this.$http.post(i.d+"/noFriendsCircleManager/addCircle",t).then(function(t){console.log(t),t.body.code===i.a?e.$message({type:"error",message:t.body.message}):(e.$message({type:"success",message:t.body.message}),setTimeout(function(){e.$router.push({path:"/friendshipManger"})}))})},cancelManger:function(){this.$router.push({path:"/friendshipManger"}),this.reload()},getFiles:function(e){var t=this,s=e.target.files[0];if(console.log(s),this.upLoadVals=s.name,e&&window.FileReader){var a=new FileReader;a.readAsDataURL(s),a.onloadend=function(){var e=this;t.src=this.result,t.$http.post(i.d+"/upload/imageUpload",t.src).then(function(s){console.log(s),s.body.code===i.a?e.$message({type:"error",message:"图片上传"+s.body.message}):t.cover=s.body.data})}}},yulans:function(e){console.log(e),this.yulanEWM=!this.yulanEWM},close:function(e){console.log(e),this.img.splice(e,1)},getFile:function(e){var t=this,s=e.target.files;console.log(s);for(var a=0;a<s.length;a++){if(this.upLoadVal=s[a].name,!e||!window.FileReader)return;var o=new FileReader;o.readAsDataURL(s[a]),o.onloadend=function(){var e=this;t.src=this.result,t.$http.post(i.d+"/upload/imageUpload",t.src).then(function(s){console.log(s),s.body.code===i.a?e.$message({type:"error",message:"图片上传"+s.body.message}):(t.registerAvatar=s.body.data,console.log(t.registerAvatar),t.img.push({photo:s.body.data}),console.log(t.img))})}}this.img.length>7&&(this.shows=!1)},selectPersonTask:function(e){var t=this;1===e&&(this.checkedCities=[]),this.$http.get(i.d+"/personalCategoryManager").then(function(e){console.log(e),t.list=e.body.data,t.$http.get(i.d+"/personalManager/getByCategory/"+t.list[0].personalNoCategory+"/1/1/").then(function(e){console.log(e),t.setList=e.body.data})}),this.firstShow=!this.firstShow},leftMenuTask:function(e,t){var s=this;console.log(e),console.log(t),this.kouweiSpan=t,this.userIndex=t,this.$http.get(i.d+"/personalManager/getByCategory/"+e.personalNoCategory+"/1/1/").then(function(e){console.log(e),s.setList=e.body.data})},handleCheckedCitiesChange:function(e){console.log(e),this.checkedCities=e;var t=e.length;this.personNum=t,this.checkAll=t===this.setList.length,this.isIndeterminate=t>0&&t<this.setList.length},setGroupSure:function(){this.firstShow=!this.firstShow,this.noPersonClass=!0},editSelectDate:function(e){console.log(e);var t=new Date(e),s=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var a=t.getDate()<10?"0"+t.getDate():t.getDate();console.log(s+"-"+i+"-"+a),this.dada1=s+"-"+i+"-"+a},editSelectTimes:function(e){console.log(e);var t=new Date(e),s=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),a=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();console.log(s+":"+i+":"+a),this.titi1=s+":"+i+":"+a},addImgChange:function(e){console.log(e),"img"===e?(this.addImgLink=e,this.gai=!this.gai):(this.gai=!this.gai,this.addImgLink=e)}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"addFriendsManger"},[s("div",{staticClass:"circle_header"},[s("router-link",{staticClass:"sp1",attrs:{to:"/friendshipManger",tag:"span"}},[e._v("朋友圈管理")]),e._v("\n    >\n    "),s("span",[e._v("新增")])],1),e._v(" "),s("div",{staticClass:"circle_body"},[s("el-form",[s("el-form-item",{attrs:{label:"朋友圈主题：","label-width":"150px"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"输入朋友圈主题",disabled:e.dis},model:{value:e.addFriendsTheme,callback:function(t){e.addFriendsTheme=t},expression:"addFriendsTheme"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"选择个人号：","label-width":"150px"}},[!1===e.noPersonClass?s("span",{staticClass:"selectPer",on:{click:function(t){return e.selectPersonTask(0)}}},[s("i",{staticClass:"iconfont icon-liebiao"}),e._v("选择个人号")]):s("div",{staticStyle:{display:"flex","flex-direction":"row"}},[s("span",{staticStyle:{"margin-right":"20px"}},[e._v("个人号已选择 "+e._s(e.personNum)+" 个")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.dis,expression:"dis === false"}],staticClass:"selectPer",on:{click:function(t){return e.selectPersonTask(1)}}},[s("i",{staticClass:"iconfont icon-liebiao"}),e._v("修改")]),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:this.checkedCities.length>0,expression:"this.checkedCities.length > 0"}],staticStyle:{"margin-left":"20px",width:"20%"},attrs:{placeholder:"选择的个人号列表如下："},model:{value:e.personHe,callback:function(t){e.personHe=t},expression:"personHe"}},e._l(e.checkedCities,function(t){return s("el-option",{key:t.personalNoName,attrs:{disabled:e.showPP,label:t.personalNoName,value:t.personalNoName}})}),1)],1)]),e._v(" "),s("el-form-item",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{label:"","label-width":"150px"}},[s("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("定时发送：")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}]},[s("el-date-picker",{attrs:{disabled:e.dis,type:"date",placeholder:"选择日期"},on:{change:e.editSelectDate},model:{value:e.editDate2,callback:function(t){e.editDate2=t},expression:"editDate2"}}),e._v(" "),s("el-time-picker",{attrs:{disabled:e.dis,format:"HH:mm:ss",placeholder:"选择时间"},on:{change:e.editSelectTimes},model:{value:e.editTimeXuan2,callback:function(t){e.editTimeXuan2=t},expression:"editTimeXuan2"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"朋友圈文案：","label-width":"150px"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",disabled:e.dis,autosize:{minRows:4,maxRows:6},placeholder:"请输入朋友圈文本内容"},model:{value:e.addFriendsWord,callback:function(t){e.addFriendsWord=t},expression:"addFriendsWord"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"配图或链接：","label-width":"150px"}},[s("el-radio-group",{on:{change:e.addImgChange},model:{value:e.addImgLink,callback:function(t){e.addImgLink=t},expression:"addImgLink"}},[s("el-radio",{attrs:{label:"img"}},[e._v("配图")]),e._v(" "),s("el-radio",{attrs:{label:"link"}},[e._v("卡片链接")])],1)],1),e._v(" "),!0===e.gai?s("el-form-item",{attrs:{label:"","label-width":"150px"}},[s("div",{staticClass:"imgList"},[s("ul",{staticStyle:{margin:"0",padding:"0",overflow:"hidden"}},e._l(e.img,function(t,i){return s("li",{key:i},[s("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.close(i)}}}),e._v(" "),s("img",{attrs:{src:t.photo}})])}),0)]),e._v(" "),s("input",{ref:"file",attrs:{type:"file",multiple:"multiple",id:"file"},on:{change:e.getFile}}),e._v(" "),s("label",{directives:[{name:"show",rawName:"v-show",value:e.shows,expression:"shows"}],staticClass:"uploadNumImg",attrs:{for:"file"}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"upload_test"},[e._v("上传文件")])]),e._v(" "),s("label",{staticStyle:{width:"202px","text-align":"center",display:"block",color:"red"}},[e._v("(提示: 最多可上传9张图)")])]):s("el-form-item",{attrs:{label:"","label-width":"150"}},[s("div",{staticClass:"newBigCon"},[s("div",{staticClass:"newTop"},[s("ul",[s("li",[e._v("链接")])])]),e._v(" "),s("div",{ref:"newBottom",staticClass:"newBottom"},[s("div",{staticClass:"newWords"},[s("i",{staticClass:"iconfont icon-lianjie"}),e._v(" "),s("el-input",{attrs:{maxlength:"800",placeholder:"添加链接"},model:{value:e.linkUrls,callback:function(t){e.linkUrls=t},expression:"linkUrls"}}),e._v(" "),s("div",{staticClass:"uploadImg"},[s("input",{ref:"file",attrs:{type:"file",id:"files"},on:{change:e.getFiles}}),e._v(" "),s("label",{staticClass:"upload",attrs:{for:"files"}},[e._v("上传文件")]),e._v(" "),s("label",{staticClass:"yulan",on:{click:function(t){return e.yulans(e.cover)}}},[e._v("预览")])]),e._v(" "),s("el-dialog",{attrs:{visible:e.yulanEWM,width:"20%"},on:{"update:visible":function(t){e.yulanEWM=t}}},[s("img",{staticClass:"imgWEM",attrs:{src:e.cover}})])],1),e._v(" "),s("div",{staticClass:"fission"}),e._v(" "),s("span",{staticStyle:{color:"red"}},[e._v("每次发送不能超过5条消息")])])])])],1)],1),e._v(" "),s("div",{staticClass:"footer"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.dis,expression:"dis === false"}],staticClass:"queDing",on:{click:e.sure}},[e._v("确 定")]),e._v(" "),s("span",{staticClass:"quXiao",on:{click:e.cancelManger}},[e._v("取 消")])]),e._v(" "),s("el-dialog",{attrs:{title:"选择个人号",center:"",visible:e.firstShow,width:"50%"},on:{"update:visible":function(t){e.firstShow=t}}},[s("div",{staticClass:"selectDia"},[s("div",{staticClass:"selectGroupName"}),e._v(" "),s("div",{staticClass:"GroupList"},[s("div",{staticClass:"groupLeft"},[s("ul",{staticClass:"leftUl"},[s("li",{staticStyle:{"text-align":"center","background-color":"#fff"}},[e._v("个人号类别")]),e._v(" "),e._l(e.list,function(t,i){return s("li",{key:i,class:{on:i==e.kouweiSpan},on:{click:function(s){return e.leftMenuTask(t,i)}}},[s("i",{staticClass:"iconfont icon-guanliyuan",class:{on:i==e.kouweiSpan}}),e._v(e._s(t.personalNoCategory))])})],2)]),e._v(" "),s("div",{staticClass:"groupRight"},[s("div",{staticClass:"groupcName"},[e._v("个人号昵称")]),e._v(" "),s("div",{staticClass:"rightRadio"},[s("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.setList,function(t,i){return s("el-checkbox",{key:i,attrs:{label:t}},[e._v(e._s(t.personalNoName))])}),1)],1)])])]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.setGroupSure}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.firstShow=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var n=s("C7Lr")(o,l,!1,function(e){s("rvVh"),s("Egkm")},"data-v-7c35879c",null);t.default=n.exports},rvVh:function(e,t){}});