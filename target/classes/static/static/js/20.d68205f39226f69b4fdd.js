webpackJsonp([20],{TS09:function(e,t){},lQmO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("T452"),i=s("8EyE"),n=s("Y8t/"),r={name:"addFriendsManger",data:function(){return{nullData:!1,dis:!1,cover:"",kouweiSpan:0,showPP:!0,personHe:"",personNum:"",noPersonClass:!1,linkUrls:"",yulanEWM:!1,upLoadVals:"",src:"",gai:!0,shows:!0,img:[],upLoadVal:"",addFriendsWord:"",addImgLink:"img",editDate2:"",editTimeXuan2:"",checked:!1,addFriendsTheme:"",firstShow:!1,checkAll:!1,checkedCities:[],isIndeterminate:!0,setList:[],list:[],registerAvatar:""}},inject:["reload"],created:function(){var e=this;if(1===this.$route.query.errno||2===this.$route.query.errno){Object(n.c)("/noFriendsCircleManager/"+this.$route.query.id,{}).then(function(t){t.data.autoSend&&(e.checked=!0),t.data.photoList&&(e.gai=!0,e.addImgLink="img"),t.data.cardUrl&&(e.gai=!1,e.addImgLink="link"),t.data.personalList&&(e.noPersonClass=!0,e.personNum=t.data.personalList.length,e.checkedCities=t.data.personalList),e.dada1=t.data.autoSend,e.titi1=t.data.autoSend,e.editDate2=t.data.autoSend,e.editTimeXuan2=t.data.autoSend,e.linkUrls=t.data.cardUrl,e.cover=t.data.cardUrlCover,e.addFriendsWord=t.data.friendsCircleOfficial,e.addFriendsTheme=t.data.friendsCircleTheme,e.checkedCities=t.data.personalList,e.img=t.data.photoList}).catch(function(t){e.$message({type:"error",message:t.message})})}2===this.$route.query.errno&&(this.dis=!0)},methods:{sure:function(){var e=this;if(""==this.addFriendsTheme)this.$message({type:"error",message:"请输入朋友圈主题"});else if(""==this.checkedCities)this.$message({type:"error",message:"请选择个人号"});else if(""==this.addFriendsWord)this.$message({type:"error",message:"请输入朋友圈文案"});else{var t={};t=!1===this.checked?{superId:Object(i.b)("p_superId"),autoSend:"",cardUrl:this.linkUrls,cardUrlCover:this.cover,friendsCircleOfficial:this.addFriendsWord,friendsCircleTheme:this.addFriendsTheme,personalList:this.checkedCities,photoList:this.img}:{superId:Object(i.b)("p_superId"),autoSend:this.dada1+" "+this.titi1,cardUrl:this.linkUrls,cardUrlCover:this.cover,friendsCircleOfficial:this.addFriendsWord,friendsCircleTheme:this.addFriendsTheme,personalList:this.checkedCities,photoList:this.img},Object(n.c)("/noFriendsCircleManager/addCircle",t).then(function(t){t.code===a.a?e.$message({type:"error",message:t.message}):(e.$message({type:"success",message:t.message}),setTimeout(function(){e.$router.push({path:"/friendshipManger"})}))}).catch(function(t){e.$message({type:"error",message:t.message})})}},cancelManger:function(){this.$router.push({path:"/friendshipManger"}),this.reload()},getFiles:function(e){var t=this,s=e.target.files[0];if(this.upLoadVals=s.name,e&&window.FileReader){var i=new FileReader;i.readAsDataURL(s),i.onloadend=function(){var e=this;t.src=this.result,t.$message({showClose:!0,message:"图片压缩中.....",duration:0}),Object(n.c)("/upload/imageUpload",t.src).then(function(s){s.code===a.a?e.$message({type:"error",message:"图片上传"+s.message}):(t.$message.closeAll(),t.$message({type:"success",message:"图片上传成功"}),t.cover=s.data)}).catch(function(t){e.$message({type:"error",message:t.message})})}}},yulans:function(e){this.yulanEWM=!this.yulanEWM},close:function(e){this.img.splice(e,1),this.img.length<6&&(this.shows=!0)},getFile:function(e){for(var t=this,s=e.target.files,i=0;i<s.length;i++){if(this.upLoadVal=s[i].name,!e||!window.FileReader)return;var r=new FileReader;r.readAsDataURL(s[i]),r.onloadend=function(){var e=this;t.src=this.result,t.$message({showClose:!0,message:"图片压缩中.....",duration:0}),Object(n.c)("/upload/imageUpload",t.src).then(function(s){s.code===a.a?e.$message({type:"error",message:"图片上传"+s.message}):(t.$message.closeAll(),t.$message({type:"success",message:"图片上传成功"}),t.registerAvatar=s.data,t.img.push({photo:s.data}))}).catch(function(t){e.$message({type:"error",message:t.message})})}}this.img.length>6&&(this.shows=!1)},selectPersonTask:function(e){var t=this;1===e&&(this.checkedCities=[]),Object(n.b)("/personalCategoryManager").then(function(e){t.list=e.data,Object(n.b)("/personalManager/getByCategory/"+t.list[0].personalNoCategory+"/1/2/").then(function(e){t.setList=e.data}).catch(function(e){t.$message({type:"error",message:e.message})})}).catch(function(e){t.$message({type:"error",message:e.message})}),this.firstShow=!this.firstShow},leftMenuTask:function(e,t){var s=this;this.kouweiSpan=t,this.userIndex=t,Object(n.b)("/personalManager/getByCategory/"+e.personalNoCategory+"/1/2/").then(function(e){null==e.data?s.nullData=!0:(s.setList=e.data,s.nullData=!1)}).catch(function(e){s.$message({type:"error",message:e.message})})},handleCheckedCitiesChange:function(e){this.checkedCities=e;var t=e.length;this.personNum=t,this.checkAll=t===this.setList.length,this.isIndeterminate=t>0&&t<this.setList.length},setGroupSure:function(){this.firstShow=!this.firstShow,this.noPersonClass=!0},editSelectDate:function(e){var t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var i=t.getDate()<10?"0"+t.getDate():t.getDate();this.dada1=s+"-"+a+"-"+i},editSelectTimes:function(e){var t=new Date(e),s=t.getHours()<10?"0"+t.getHours():t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();this.titi1=s+":"+a+":"+i},addImgChange:function(e){"img"===e?(this.addImgLink=e,this.gai=!this.gai):(this.gai=!this.gai,this.addImgLink=e)}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"addFriendsManger"},[s("div",{staticClass:"circle_header"},[s("router-link",{staticClass:"sp1",attrs:{to:"/friendshipManger",tag:"span"}},[e._v("朋友圈管理")]),e._v("\n        >\n        "),s("span",[e._v("新增")])],1),e._v(" "),s("div",{staticClass:"circle_body"},[s("el-form",[s("el-form-item",{attrs:{label:"朋友圈主题：","label-width":"150px"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"输入朋友圈主题,12字以内",maxlength:"12",disabled:e.dis},model:{value:e.addFriendsTheme,callback:function(t){e.addFriendsTheme=t},expression:"addFriendsTheme"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"选择个人号：","label-width":"150px"}},[!1===e.noPersonClass?s("span",{staticClass:"selectPer",on:{click:function(t){return e.selectPersonTask(0)}}},[s("i",{staticClass:"iconfont icon-liebiao"}),e._v("选择个人号")]):s("div",{staticStyle:{display:"flex","flex-direction":"row"}},[s("span",{staticStyle:{"margin-right":"20px"}},[e._v("个人号已选择 "+e._s(e.personNum)+" 个")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.dis,expression:"dis === false"}],staticClass:"selectPer",on:{click:function(t){return e.selectPersonTask(1)}}},[s("i",{staticClass:"iconfont icon-liebiao"}),e._v("修改")]),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:this.checkedCities.length>0,expression:"this.checkedCities.length > 0"}],staticStyle:{"margin-left":"20px",width:"60%"},attrs:{placeholder:"选择的个人号列表如下："},model:{value:e.personHe,callback:function(t){e.personHe=t},expression:"personHe"}},e._l(e.checkedCities,function(t){return s("el-option",{key:t.personalNoName,attrs:{disabled:e.showPP,label:t.personalNoName,value:t.personalNoName}})}),1)],1)]),e._v(" "),s("el-form-item",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{label:"","label-width":"150px"}},[s("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("定时发送：")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}]},[s("el-date-picker",{attrs:{disabled:e.dis,type:"date",placeholder:"选择日期"},on:{change:e.editSelectDate},model:{value:e.editDate2,callback:function(t){e.editDate2=t},expression:"editDate2"}}),e._v(" "),s("el-time-picker",{attrs:{disabled:e.dis,format:"HH:mm:ss",placeholder:"选择时间"},on:{change:e.editSelectTimes},model:{value:e.editTimeXuan2,callback:function(t){e.editTimeXuan2=t},expression:"editTimeXuan2"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"朋友圈文案：","label-width":"150px"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",maxlength:"1024",disabled:e.dis,autosize:{minRows:4,maxRows:6},placeholder:"请输入朋友圈文本内容,不得超过1024个字"},model:{value:e.addFriendsWord,callback:function(t){e.addFriendsWord=t},expression:"addFriendsWord"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"配图或链接：","label-width":"150px"}},[s("el-radio-group",{on:{change:e.addImgChange},model:{value:e.addImgLink,callback:function(t){e.addImgLink=t},expression:"addImgLink"}},[s("el-radio",{attrs:{label:"img"}},[e._v("配图")])],1)],1),e._v(" "),!0===e.gai?s("el-form-item",{attrs:{label:"","label-width":"150px"}},[s("div",{staticClass:"imgList"},[s("ul",{staticStyle:{margin:"0",padding:"0",overflow:"hidden"}},e._l(e.img,function(t,a){return s("li",{key:a},[s("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.close(a)}}}),e._v(" "),s("img",{attrs:{src:t.photo}})])}),0)]),e._v(" "),s("input",{ref:"file",attrs:{type:"file",multiple:"multiple",id:"file"},on:{change:e.getFile}}),e._v(" "),s("label",{directives:[{name:"show",rawName:"v-show",value:e.shows,expression:"shows"}],staticClass:"uploadNumImg",attrs:{for:"file"}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"upload_test"},[e._v("上传文件")])]),e._v(" "),s("label",{staticStyle:{width:"202px","text-align":"center",display:"block",color:"red"}},[e._v("(提示: 最多可上传9张图)")])]):s("span")],1)],1),e._v(" "),s("div",{staticClass:"footer"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.dis,expression:"dis === false"}],staticClass:"queDing",on:{click:e.sure}},[e._v("确 定")]),e._v(" "),s("span",{staticClass:"quXiao",on:{click:e.cancelManger}},[e._v("取 消")])]),e._v(" "),s("el-dialog",{attrs:{title:"选择个人号",center:"",visible:e.firstShow,width:"50%"},on:{"update:visible":function(t){e.firstShow=t}}},[s("div",{staticClass:"selectDia"},[s("div",{staticClass:"selectGroupName"}),e._v(" "),s("div",{staticClass:"GroupList"},[s("div",{staticClass:"groupLeft"},[s("ul",{staticClass:"leftUl"},[s("li",{staticStyle:{"text-align":"center","background-color":"#fff"}},[e._v("个人号类别")]),e._v(" "),e._l(e.list,function(t,a){return s("li",{key:a,class:{on:a==e.kouweiSpan},on:{click:function(s){return e.leftMenuTask(t,a)}}},[s("i",{staticClass:"iconfont icon-guanliyuan",class:{on:a==e.kouweiSpan}}),e._v(e._s(t.personalNoCategory))])})],2)]),e._v(" "),s("div",{staticClass:"groupRight"},[s("div",{staticClass:"groupcName"},[e._v("个人号昵称")]),e._v(" "),e.nullData?s("div",{staticStyle:{"text-align":"center",padding:"40px 0px","font-weight":"700"}},[e._v("\n                此类别下暂无个人号哦\n              ")]):s("div",{staticClass:"rightRadio"},[s("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.setList,function(t,a){return s("el-checkbox",{key:a,attrs:{label:t,disabled:!(t.personalNoName.indexOf("正常")>0)}},[e._v(e._s(t.personalNoName))])}),1)],1)])])]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.setGroupSure}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.firstShow=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var o=s("C7Lr")(r,l,!1,function(e){s("mcTX"),s("TS09")},"data-v-271135e2",null);t.default=o.exports},mcTX:function(e,t){}});