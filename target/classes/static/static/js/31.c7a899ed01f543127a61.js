webpackJsonp([31],{VK1r:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("T452"),n=a("SthE"),o=a("8EyE"),s=a("Y8t/"),c={name:"wxLogin",data:function(){return{clientHeight:"",timer:null,id:""}},created:function(){var e=this;this.clientHeight=""+document.documentElement.clientHeight,console.log(this.clientHeight),window.onresize=function(){this.clientHeight=""+document.documentElement.clientHeight},Object(s.b)("/getAccId").then(function(t){console.log(t.data);var a=i.c+"/personalNoSuperuesr/loginInWX?id=";e.id=t.data;var o=Object(n.a)({data:decodeURIComponent(a+t.data),size:300});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(o),e.timer=setInterval(e._getCookieVal,3e3)}).catch(function(t){e.$message({type:"error",message:t.message})})},methods:{changeFixed:function(e){console.log(e),this.$refs.hv.style.height=e+"px"},_getCookieVal:function(){var e=this,t=this;Object(s.b)("/personalNoSuperuesr/veryById/"+t.id+"/").then(function(a){console.log(a),a.code===i.a?t.$message({type:"error",message:"数据请求失败..."}):1===a.data.flag&&a.data.openid&&Object(s.b)("/personalNoSuperuesr/getByAccessTockenId/"+a.data.id+"/").then(function(e){console.log(e),Object(o.c)("p_openid",e.data.openid,e.data.time),Object(o.c)("p_superId",e.data.superId,e.data.time),Object(o.c)("p_superName",e.data.superName,e.data.time),Object(o.c)("p_headPortrait",e.data.headPortrait,e.data.time),Object(o.c)("PersonalNoCookieUserInfoSuff",e.data.PersonalNoCookieUserInfoSuff,e.data.time),Object(o.c)("LOGINFLG",e.data.LOGINFLG,e.data.time),console.log(t.$route.query),t.$router.push({path:t.$route.query.redirect})}).catch(function(t){e.$message({type:"error",message:t.message})})}).catch(function(t){e.$message({type:"error",message:t.message})})}},watch:{clientHeight:function(){this.changeFixed(this.clientHeight)}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"hv",staticClass:"wxLogin",style:"height: "+this.clientHeight+"px"},[this._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-qrcode"},[t("div",{staticClass:"qrcodeStyle",attrs:{id:"qrcode"}}),this._v(" "),t("div",{staticClass:"title"},[this._v("打开微信扫描二维码登录系统")])])}]};var d=a("C7Lr")(c,r,!1,function(e){a("onZA")},"data-v-5d56b010",null);t.default=d.exports},onZA:function(e,t){}});