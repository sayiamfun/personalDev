webpackJsonp([22],{bXzj:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("y/jF"),i=e("4KuQ"),n=e("T452"),o=e("dybo"),l=e("SthE"),c=e("Y8t/"),r=e("8EyE"),d={name:"personalTask",data:function(){return{showHidden:!1,channelName:"",taskId:"",innerVisible:!1,current:1,type:"",stree:"",diaImg:"https://goss.veer.com/creative/vcg/veer/1600water/veer-158141693.jpg",copyLink:"",dialogFormVisible1:!1,news:[],newsType:[],dialogFormVisible:!1,seeData:!1,value:"",personRboot:"",writeLink:"",link:!1,opt:[],taskVal:"",pagesize:20,total:0,currentPage:1,Fans:[],noLoading:!1,totalData:[],taskList:[],taskChannelId:""}},inject:["reload"],created:function(){var t=this;Object(c.c)("/personal/noTask/1/20/",{}).then(function(a){console.log(a),a.code===n.a?t.$message({type:"error",message:"数据请求"+a.message}):(t.Fans=a.data.records,t.total=a.data.total)})},methods:{qudao:function(t){console.log(t),this.taskChannelId=t.id,this.channelName=t.channelName,this.personRboot=t.channelName},channelCancel:function(){this.innerVisible=!this.innerVisible,this.personRboot=""},channelSubmit:function(){var t=this,a=Object(r.b)("p_openid"),e=n.c+"/taskEntry?id="+this.taskId;Object(c.b)("/wxShortUrl?targetUrl="+e+"&openid="+a+"&roadId="+this.taskId+"&id="+this.taskChannelId+"&flag=2").then(function(a){t.shortUrl=a.data.url,t.copyLink=a.data.url;var e=Object(l.a)({data:decodeURIComponent(t.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(e),t.innerVisible=!t.innerVisible})},selectChannel:function(){this.innerVisible=!this.innerVisible},go:function(t){var a=this;console.log(t);Object(c.c)("/personal/noTask/"+t+"/20/",{}).then(function(t){console.log(t),a.Fans=t.data.records})},pagechange:function(t){var a=this;console.log(t);Object(c.c)("/personal/noTask/"+t+"/20/",{}).then(function(t){console.log(t),a.Fans=t.data.records})},endTask:function(t){var a=this;Object(c.a)("/personal/noTask/stopTask/"+t.id+"/").then(function(t){console.log(t),t.code===n.a?a.$message({type:"error",message:t.message}):(a.$message({type:"success",message:t.message}),a.reload())})},editTask:function(t){this.$router.push({path:"/personalTaskDetails",query:{id:t.id,error:1,roadId:t.roadId}})},personTaskSearch:function(){var t=this;this.Fans=[];var a={activityType:"",taskName:this.taskVal};Object(c.c)("/personal/noTask/1/20/",a).then(function(a){a.code===n.a?t.$message({type:"error",message:"查询"+a.message}):(t.Fans=a.data.records,t.total=a.data.total)})},refreshImg:function(){var t=this;Object(c.b)("/apiPages/buildPassage/rebuildShortLink?id="+this.refreshId).then(function(a){console.log(a),a.code===n.a&&(t.diaImg=a.data.qrcode,t.copyLink=a.data.link)})},copyConLick:function(t,a){console.log(t),Object(i.a)(t,a)},selectOnes:function(t){console.log(t)},selectTwos:function(t){console.log(t)},selectOne:function(t){var a=this;console.log(t);var e={activityType:t,taskName:""};Object(c.c)("/personal/noTask/1/20/",e).then(function(t){console.log(t),a.Fans=t.data.records,a.total=t.data.total})},pulPerTask:function(){this.$router.push({path:"/personalTaskDetails",query:{error:0}})},handleSizeChange:function(t){console.log(t),this.pagesize=t},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t},jmupLink:function(){this.link=!this.link},seeperData:function(t){var a=this;Object(c.b)("/personal/noTask/getPersonalDataByTaskId/"+t.id+"/").then(function(t){t.code===n.a?a.$message({type:"error",message:t.message}):0===t.code&&(t.data.No?a.$message({type:"error",message:t.data.No}):(a.seeData=!a.seeData,a.totalData=t.data.taskData,a.taskList=t.data.personalList))})},personalTaskDetails:function(t){this.$router.push({path:"/personalTaskDetails",query:{id:t.id,error:2,passageId:t.roadId}})},taskMessage:function(t){console.log(t),this.$router.push({path:"/taskMessage",query:{title:t.taskName,id:t.id}})},seeTaskLink:function(t,a){var e=this;this.dialogFormVisible1=!this.dialogFormVisible1,console.log(t),this.taskId=t.id,Object(c.b)("/personalNoTaskChannel/listByTaskId/"+this.taskId+"/").then(function(a){console.log(a);var s="",i="";0===a.data.length?(e.channelName="默认",e.showHidden=!0):(e.channelName=a.data[0].channelName,e.showHidden=!1),0!==a.data.length?(s=2,e.opt=a.data,i=n.c+"/taskEntry?taskId="+e.taskId,console.log("我是渠道ID："+a.data[0].id),Object(c.b)("/wxShortUrl?targetUrl="+i+"&openid="+Object(r.b)("p_openid")+"&roadId="+t.id+"&id="+a.data[0].id+"&flag="+s).then(function(t){e.shortUrl=t.data.url,e.copyLink=e.shortUrl;var a=Object(l.a)({data:decodeURIComponent(e.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(a)})):(s=1,e.opt=a.data,i=n.c+"/taskEntry?taskId="+e.taskId,Object(c.b)("/wxShortUrl?targetUrl="+i+"&openid="+Object(r.b)("p_openid")+"&id="+t.id+"&flag="+s).then(function(t){e.shortUrl=t.data.url,e.copyLink=e.shortUrl;var a=Object(l.a)({data:decodeURIComponent(e.shortUrl),size:140});document.getElementById("qrcode").innerHTML="",document.getElementById("qrcode").appendChild(a)}))})},taskSure:function(){this.link=!this.link},taskCancel:function(){this.link=!this.link},taskDataSure:function(){this.seeData=!this.seeData}},components:{Loading:s.a,"v-pagination":o.a}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"personalTask"},[e("div",{staticClass:"select-wrapper"},[e("div",{staticClass:"query-wrapper"},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectOne},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}},t._l(t.opt,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),e("div",{staticClass:"taskSearch"},[e("el-input",{attrs:{placeholder:"请输入个人号名称"},model:{value:t.taskVal,callback:function(a){t.taskVal=a},expression:"taskVal"}}),t._v(" "),e("span",{staticClass:"taskSpan",on:{click:t.personTaskSearch}},[t._v("搜索")])],1)]),t._v(" "),t.Fans.length>0?e("div",{staticClass:"pul-wrapper"},[e("ul",{staticClass:"pulEvery"},t._l(t.Fans.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),function(a,s){return e("li",{key:s,staticClass:"li1"},[1===a.activityType?e("span",{staticClass:"yijieshu"},[t._v("已结束")]):t._e(),t._v(" "),e("div",{staticClass:"pul-top clearfix"},[e("div",{staticClass:"pul-left"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(a.taskName))])]),t._v(" "),0===a.activityType?e("div",{staticClass:"pul-right"},[e("ul",[e("li",{on:{click:function(e){return t.seeperData(a)}}},[e("i",{staticClass:"iconfont icon-chakan"}),t._v(" "),e("span",[t._v("查看数据")])]),t._v(" "),e("li",{on:{click:function(e){return t.personalTaskDetails(a)}}},[e("i",{staticClass:"iconfont icon-fuzhi pd10"}),t._v(" "),e("span",[t._v("复制")])]),t._v(" "),e("li",{staticStyle:{width:"150px"},on:{click:function(e){return t.seeTaskLink(a)}}},[e("i",{staticClass:"iconfont icon-chakan pd10"}),t._v(" "),e("span",[t._v("查看任务链接")])]),t._v(" "),e("li",{on:{click:function(e){return t.editTask(a)}}},[e("i",{staticClass:"iconfont icon-bianji pd10"}),t._v(" "),e("span",[t._v("编辑")])]),t._v(" "),e("li",{on:{click:function(e){return t.endTask(a)}}},[e("i",{staticClass:"iconfont icon-jieshu pd10"}),t._v(" "),e("span",[t._v("结束")])])])]):e("div",{staticClass:"pul-right"},[e("ul",[e("li",{on:{click:function(e){return t.personalTaskDetails(a)}}},[e("i",{staticClass:"iconfont icon-fuzhi pd10"}),t._v(" "),e("span",[t._v("复制")])]),t._v(" "),e("li",{on:{click:function(e){return t.seeperData(a)}}},[e("i",{staticClass:"iconfont icon-chakan"}),t._v(" "),e("span",[t._v("查看数据")])])])])]),t._v(" "),e("div",{staticClass:"pul-con"},[e("div",{staticClass:"pul-person-top"},[e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"},[t._v("截止时间：")]),t._v(" "),e("span",{staticClass:"item-content"},[t._v(t._s(a.taskEndTime))])]),t._v(" "),e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"},[t._v("粉丝标签：")]),t._v(" "),e("span",{staticClass:"item-content"},[t._v(t._s(a.noLable))])]),t._v(" "),e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"},[t._v("任务主题：")]),t._v(" "),e("span",{staticClass:"item-content"},[t._v(t._s(a.taskTheme))])]),t._v(" "),t._m(0,!0)]),t._v(" "),e("div",{staticClass:"pul-person-top"},[e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"},[t._v("参与任务个人号数：")]),t._v(" "),e("span",{staticClass:"item-content"},[t._v(t._s(a.personalNum))])]),t._v(" "),e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"},[t._v("参与任务渠道数：")]),t._v(" "),e("span",{staticClass:"item-content"},[t._v(t._s(a.channelNum))])]),t._v(" "),e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"},[t._v("回复入群类别：")]),t._v(" "),a.categoryName1?e("span",{staticClass:"item-content"},[t._v(t._s(a.categoryName1))]):e("span",{staticClass:"item-content"},[t._v("暂无群类别")])]),t._v(" "),e("div",{staticClass:"item"},[e("span",{staticClass:"item-title"},[t._v("开课入群类别：")]),t._v(" "),a.categoryName2?e("span",{staticClass:"item-content"},[t._v(t._s(a.categoryName2))]):e("span",{staticClass:"item-content"},[t._v("暂无群类别")])])])])])}),0),t._v(" "),e("v-pagination",{directives:[{name:"show",rawName:"v-show",value:t.Fans.length,expression:"Fans.length"}],attrs:{total:t.total,"current-page":t.current,num:t.total},on:{pagechange:t.pagechange,go:t.go}})],1):e("div",{staticClass:"noData"},[t._v("暂无数据")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.noLoading,expression:"noLoading"}]},[e("loading")],1),t._v(" "),e("el-dialog",{attrs:{title:"编辑个人号任务结束跳转链接",width:"30%",center:"",visible:t.link},on:{"update:visible":function(a){t.link=a}}},[e("div",{staticStyle:{"padding-bottom":"10px"}},[t._v("填写个人号任务结束后的跳转链接：")]),t._v(" "),e("el-input",{model:{value:t.writeLink,callback:function(a){t.writeLink=a},expression:"writeLink"}}),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:t.taskSure}},[t._v("确 定")]),t._v(" "),e("el-button",{on:{click:t.taskCancel}},[t._v("取 消")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"查看数据",width:"30%",center:"",visible:t.seeData},on:{"update:visible":function(a){t.seeData=a}}},[e("div",{staticClass:"personView"},[e("div",{staticClass:"diaOne"},[e("ul",{staticClass:"diaulOne"},[e("li",[t._v("点击链接人数")]),t._v(" "),e("li",[t._v("推送个人号任务")]),t._v(" "),e("li",[t._v("加好友人数")])]),t._v(" "),e("ul",{staticClass:"diaulTwo"},[e("li",[t._v(t._s(t.totalData.clickUrlNum))]),t._v(" "),e("li",[t._v(t._s(t.totalData.toPeopleNum))]),t._v(" "),e("li",[t._v(t._s(t.totalData.peopleNum))])])]),t._v(" "),e("div",{staticClass:"diaTwo"},[e("ul",{staticClass:"diaulOne",staticStyle:{"margin-top":"20px"}},[e("li",[t._v("设备ID")]),t._v(" "),e("li",[t._v("昵称")]),t._v(" "),e("li",[t._v("推送人数")]),t._v(" "),e("li",[t._v("加好友人数")])]),t._v(" "),e("ul",{staticClass:"diaulTce"},t._l(t.taskList,function(a,s){return e("li",{key:s},[e("ul",{staticClass:"diaulTwice"},[e("li",[t._v(t._s(a.equipmentId))]),t._v(" "),e("li",[t._v(t._s(a.personalNoName))]),t._v(" "),e("li",[t._v(t._s(a.toPeopleNum))]),t._v(" "),e("li",[t._v(t._s(a.peopleNum))])])])}),0)])]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:t.taskDataSure}},[t._v("确 定")])],1)]),t._v(" "),e("el-dialog",{attrs:{title:"二维码操作",center:"",visible:t.dialogFormVisible1},on:{"update:visible":function(a){t.dialogFormVisible1=a}}},[e("el-button",{attrs:{type:"primary",disabled:t.showHidden},on:{click:t.selectChannel}},[t._v("选择渠道")]),t._v(" "),e("el-dialog",{attrs:{title:"选择渠道",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(a){t.innerVisible=a}}},[e("el-form",[e("el-form-item",{attrs:{label:"推广渠道"}},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.qudao},model:{value:t.personRboot,callback:function(a){t.personRboot=a},expression:"personRboot"}},t._l(t.opt,function(t){return e("el-option",{key:t.id,attrs:{label:t.channelName,value:t}})}),1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"orange",attrs:{type:"primary"},on:{click:t.channelSubmit}},[t._v("确 定")]),t._v(" "),e("el-button",{on:{click:t.channelCancel}},[t._v("取 消")])],1)],1),t._v(" "),e("div",{staticClass:"diaImg",staticStyle:{display:"flex","flex-direction":"row"}},[e("div",{staticClass:"qrcodeStyle",staticStyle:{width:"140px",height:"140px","margin-top":"10px","margin-right":"20px","text-align":"center"},attrs:{id:"qrcode"}}),t._v(" "),e("div",{staticClass:"ctrlS"},[e("span",{staticClass:"ewm",staticStyle:{"margin-bottom":"0.2rem","text-align":"left"}},[t._v("渠道名："+t._s(t.channelName))]),t._v(" "),e("span",{staticClass:"ewmlink"},[t._v("微信短链接："),e("em",{staticClass:"linka",staticStyle:{color:"orange"}},[t._v(t._s(t.copyLink))])]),t._v(" "),e("label",{staticClass:"copy",on:{click:function(a){return t.copyConLick(t.copyLink,a)}}},[t._v("复制")])])]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogFormVisible1=!1}}},[t._v("确 定")]),t._v(" "),e("el-button",{on:{click:function(a){t.dialogFormVisible1=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"}),this._v(" "),a("span",{staticClass:"item-content"})])}]};var v=e("C7Lr")(d,p,!1,function(t){e("mcpy")},"data-v-47a5d412",null);a.default=v.exports},mcpy:function(t,a){}});